/* Generated by JSIL v0.8.1 build 26046. See http://jsil.org/ for more information. */ 
'use strict';
var $asm03 = JSIL.DeclareAssembly("Fusee.Engine.SimpleScene, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null");

JSIL.DeclareNamespace("Fusee");
JSIL.DeclareNamespace("Fusee.Engine");
JSIL.DeclareNamespace("Fusee.Engine.SimpleScene");
/* class Fusee.Engine.SimpleScene.ContainerExtensions */ 

(function ContainerExtensions$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm05.Fusee.Serialization.SceneNodeContainer)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm05.Fusee.Serialization.SceneComponentContainer)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm07.System.Collections.Generic.List$b1.Of($asm05.Fusee.Serialization.SceneComponentContainer))) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm07.System.Type)) ();
  };
  var $T04 = function () {
    return ($T04 = JSIL.Memoize($asm07.System.Int32)) ();
  };
  var $T05 = function () {
    return ($T05 = JSIL.Memoize($asm05.Fusee.Serialization.LightComponent)) ();
  };
  var $T06 = function () {
    return ($T06 = JSIL.Memoize($asm05.Fusee.Serialization.MaterialComponent)) ();
  };
  var $T07 = function () {
    return ($T07 = JSIL.Memoize($asm05.Fusee.Serialization.MeshComponent)) ();
  };
  var $T08 = function () {
    return ($T08 = JSIL.Memoize($asm05.Fusee.Serialization.TransformComponent)) ();
  };
  var $T09 = function () {
    return ($T09 = JSIL.Memoize($asm04.Fusee.Math.float4x4)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.List`1", [$asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")]), null))) ();
  };
  var $S01 = function () {
    return ($S01 = JSIL.Memoize(new JSIL.MethodSignature(null, [$asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")]))) ();
  };
  var $S02 = function () {
    return ($S02 = JSIL.Memoize(new JSIL.MethodSignature($asm07.TypeRef("System.Boolean"), [$asm07.TypeRef("System.Type")]))) ();
  };
  var $S03 = function () {
    return ($S03 = JSIL.Memoize(new JSIL.MethodSignature($asm04.TypeRef("Fusee.Math.float4x4"), [$asm04.TypeRef("Fusee.Math.float4x4"), $asm04.TypeRef("Fusee.Math.float4x4")]))) ();
  };
  var $S04 = function () {
    return ($S04 = JSIL.Memoize(new JSIL.MethodSignature($asm04.TypeRef("Fusee.Math.float4x4"), [$asm04.TypeRef("Fusee.Math.float3")]))) ();
  };

  function ContainerExtensions_AddComponent (sncThis, scc) {
    if ((scc !== null) && (sncThis !== null)) {
      if (sncThis.Components === null) {
        sncThis.Components = $S00().Construct();
      }
      $S01().CallVirtual("Add", null, sncThis.Components, scc);
    }
  };

  function ContainerExtensions_GetComponent (sncThis, type, inx) {
    var $temp00;
    if (!(!((sncThis === null) || 
          (sncThis.Components === null)) && !$T03().op_Equality(type, null))) {
      var result = null;
    } else {

      for (var a$0 = sncThis.Components._items, i$0 = 0, l$0 = (sncThis.Components._size | 0); i$0 < l$0; ($temp00 = i$0, 
          i$0 = ((i$0 + 1) | 0), 
          $temp00)) {
        var current = a$0[i$0];
        var num = 0;
        if ($S02().CallVirtual("IsAssignableFrom", null, JSIL.GetType(current), type)) {
          if (num === (inx | 0)) {
            result = current;
            return result;
          }
          num = ((num + 1) | 0);
        }
      }
      result = null;
    }
    return result;
  };

  function ContainerExtensions_GetComponent$b1 (TComp, sncThis, inx) {
    return $thisType.GetComponent(sncThis, TComp, inx);
  };

  function ContainerExtensions_GetLight (sncThis, inx) {
    return $T05().$Cast($thisType.GetComponent$b1($T05())(sncThis, inx));
  };

  function ContainerExtensions_GetMaterial (sncThis, inx) {
    return $T06().$Cast($thisType.GetComponent$b1($T06())(sncThis, inx));
  };

  function ContainerExtensions_GetMesh (sncThis, inx) {
    return $T07().$Cast($thisType.GetComponent$b1($T07())(sncThis, inx));
  };

  function ContainerExtensions_Matrix (tcThis) {
    return $S03().CallStatic($T09(), "op_Multiply", null, 
      $S03().CallStatic($T09(), "op_Multiply", null, 
        $S03().CallStatic($T09(), "op_Multiply", null, 
          $S03().CallStatic($T09(), "op_Multiply", null, 
            $T09().CreateTranslation(tcThis.Translation.MemberwiseClone()).MemberwiseClone(), 
            $T09().CreateRotationY(tcThis.Rotation.y).MemberwiseClone()
          ).MemberwiseClone(), 
          $T09().CreateRotationX(tcThis.Rotation.x).MemberwiseClone()
        ).MemberwiseClone(), 
        $T09().CreateRotationZ(tcThis.Rotation.z).MemberwiseClone()
      ).MemberwiseClone(), 
      $S04().CallStatic($T09(), "CreateScale", null, tcThis.Scale.MemberwiseClone()).MemberwiseClone()
    );
  };

  JSIL.MakeStaticClass("Fusee.Engine.SimpleScene.ContainerExtensions", true, [], function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:true , Public:true }, "AddComponent", 
      new JSIL.MethodSignature(null, [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")]), 
      ContainerExtensions_AddComponent
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "GetComponent", 
      new JSIL.MethodSignature($asm05.TypeRef("Fusee.Serialization.SceneComponentContainer"), [
          $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $asm07.TypeRef("System.Type"), 
          $.Int32
        ]), 
      ContainerExtensions_GetComponent
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "GetComponent", 
      new JSIL.MethodSignature($asm05.TypeRef("Fusee.Serialization.SceneComponentContainer"), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $.Int32], ["TComp"]), 
      ContainerExtensions_GetComponent$b1
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "GetLight", 
      new JSIL.MethodSignature($asm05.TypeRef("Fusee.Serialization.LightComponent"), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $.Int32]), 
      ContainerExtensions_GetLight
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "GetMaterial", 
      new JSIL.MethodSignature($asm05.TypeRef("Fusee.Serialization.MaterialComponent"), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $.Int32]), 
      ContainerExtensions_GetMaterial
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "GetMesh", 
      new JSIL.MethodSignature($asm05.TypeRef("Fusee.Serialization.MeshComponent"), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $.Int32]), 
      ContainerExtensions_GetMesh
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "Matrix", 
      new JSIL.MethodSignature($asm04.TypeRef("Fusee.Math.float4x4"), [$asm05.TypeRef("Fusee.Serialization.TransformComponent")]), 
      ContainerExtensions_Matrix
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    return function (newThisType) { $thisType = newThisType; }; 
  })
    .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

})();

/* class Fusee.Engine.SimpleScene.SceneFinderExtensions */ 

(function SceneFinderExtensions$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm05.Fusee.Serialization.SceneNodeContainer)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm07.System.Predicate$b1.Of($asm05.Fusee.Serialization.SceneComponentContainer))) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneFinderExtensions_SceneComponentEnumerable$b1.Of($asm05.Fusee.Serialization.SceneComponentContainer))) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitorHelpers)) ();
  };
  var $T04 = function () {
    return ($T04 = JSIL.Memoize($asm07.System.Type)) ();
  };
  var $T05 = function () {
    return ($T05 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerable$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T06 = function () {
    return ($T06 = JSIL.Memoize($asm07.System.Predicate$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T07 = function () {
    return ($T07 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneFinderExtensions_SceneNodeEnumerable$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T08 = function () {
    return ($T08 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneFinderExtensions_SceneNodeWhereComponentEnumerable$b2.Of($asm05.Fusee.Serialization.SceneNodeContainer, $asm05.Fusee.Serialization.SceneComponentContainer))) ();
  };
  var $IM00 = function () {
    return ($IM00 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerable$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer).GetEnumerator)) ();
  };

  function SceneFinderExtensions_FindComponents$00 (root, match) {
    var sceneComponentEnumerable = new ($T02())();
    sceneComponentEnumerable._match = match;
    sceneComponentEnumerable._rootList = $T03().SingleRootEnum(root);
    return sceneComponentEnumerable;
  };

  function SceneFinderExtensions_FindComponents$b1$01 (TComponent, root, match) {
    var sceneComponentEnumerable = new ($asm03.Fusee.Engine.SimpleScene.SceneFinderExtensions_SceneComponentEnumerable$b1.Of(TComponent)) ();
    sceneComponentEnumerable._match = match;
    sceneComponentEnumerable._rootList = $T03().SingleRootEnum(root);
    return sceneComponentEnumerable;
  };

  function SceneFinderExtensions_FindComponents$02 (rootList, match) {
    var sceneComponentEnumerable = new ($T02())();
    sceneComponentEnumerable._match = match;
    sceneComponentEnumerable._rootList = $IM00().Call(rootList, null);
    return sceneComponentEnumerable;
  };

  function SceneFinderExtensions_FindComponents$b1$03 (TComponent, rootList, match) {
    var sceneComponentEnumerable = new ($asm03.Fusee.Engine.SimpleScene.SceneFinderExtensions_SceneComponentEnumerable$b1.Of(TComponent)) ();
    sceneComponentEnumerable._match = match;
    sceneComponentEnumerable._rootList = $IM00().Call(rootList, null);
    return sceneComponentEnumerable;
  };

  function SceneFinderExtensions_FindNodes$04 (root, match) {
    var sceneNodeEnumerable = new ($T07())();
    sceneNodeEnumerable._match = match;
    sceneNodeEnumerable._rootList = $T03().SingleRootEnum(root);
    return sceneNodeEnumerable;
  };

  function SceneFinderExtensions_FindNodes$b1$05 (TNode, root, match) {
    var sceneNodeEnumerable = new ($asm03.Fusee.Engine.SimpleScene.SceneFinderExtensions_SceneNodeEnumerable$b1.Of(TNode)) ();
    sceneNodeEnumerable._match = match;
    sceneNodeEnumerable._rootList = $T03().SingleRootEnum(root);
    return sceneNodeEnumerable;
  };

  function SceneFinderExtensions_FindNodes$06 (rootList, match) {
    var sceneNodeEnumerable = new ($T07())();
    sceneNodeEnumerable._match = match;
    sceneNodeEnumerable._rootList = $IM00().Call(rootList, null);
    return sceneNodeEnumerable;
  };

  function SceneFinderExtensions_FindNodes$b1$07 (TNode, rootList, match) {
    var sceneNodeEnumerable = new ($asm03.Fusee.Engine.SimpleScene.SceneFinderExtensions_SceneNodeEnumerable$b1.Of(TNode)) ();
    sceneNodeEnumerable._match = match;
    sceneNodeEnumerable._rootList = $IM00().Call(rootList, null);
    return sceneNodeEnumerable;
  };

  function SceneFinderExtensions_FindNodesWhereComponent$08 (root, match) {
    var sceneNodeWhereComponentEnumerable = new ($T08())();
    sceneNodeWhereComponentEnumerable._match = match;
    sceneNodeWhereComponentEnumerable._rootList = $T03().SingleRootEnum(root);
    return sceneNodeWhereComponentEnumerable;
  };

  function SceneFinderExtensions_FindNodesWhereComponent$b1$09 (TComponent, root, match) {
    var sceneNodeWhereComponentEnumerable = new ($asm03.Fusee.Engine.SimpleScene.SceneFinderExtensions_SceneNodeWhereComponentEnumerable$b2.Of($asm05.Fusee.Serialization.SceneNodeContainer, TComponent)) ();
    sceneNodeWhereComponentEnumerable._match = match;
    sceneNodeWhereComponentEnumerable._rootList = $T03().SingleRootEnum(root);
    return sceneNodeWhereComponentEnumerable;
  };

  function SceneFinderExtensions_FindNodesWhereComponent$b2$0A (TNode, TComponent, root, match) {
    var sceneNodeWhereComponentEnumerable = new ($asm03.Fusee.Engine.SimpleScene.SceneFinderExtensions_SceneNodeWhereComponentEnumerable$b2.Of(TNode, TComponent)) ();
    sceneNodeWhereComponentEnumerable._match = match;
    sceneNodeWhereComponentEnumerable._rootList = $T03().SingleRootEnum(root);
    return sceneNodeWhereComponentEnumerable;
  };

  function SceneFinderExtensions_FindNodesWhereComponent$0B (rootList, match) {
    var sceneNodeWhereComponentEnumerable = new ($T08())();
    sceneNodeWhereComponentEnumerable._match = match;
    sceneNodeWhereComponentEnumerable._rootList = $IM00().Call(rootList, null);
    return sceneNodeWhereComponentEnumerable;
  };

  function SceneFinderExtensions_FindNodesWhereComponent$b1$0C (TComponent, rootList, match) {
    var sceneNodeWhereComponentEnumerable = new ($asm03.Fusee.Engine.SimpleScene.SceneFinderExtensions_SceneNodeWhereComponentEnumerable$b2.Of($asm05.Fusee.Serialization.SceneNodeContainer, TComponent)) ();
    sceneNodeWhereComponentEnumerable._match = match;
    sceneNodeWhereComponentEnumerable._rootList = $IM00().Call(rootList, null);
    return sceneNodeWhereComponentEnumerable;
  };

  function SceneFinderExtensions_FindNodesWhereComponent$b2$0D (TNode, TComponent, rootList, match) {
    var sceneNodeWhereComponentEnumerable = new ($asm03.Fusee.Engine.SimpleScene.SceneFinderExtensions_SceneNodeWhereComponentEnumerable$b2.Of(TNode, TComponent)) ();
    sceneNodeWhereComponentEnumerable._match = match;
    sceneNodeWhereComponentEnumerable._rootList = $IM00().Call(rootList, null);
    return sceneNodeWhereComponentEnumerable;
  };

  JSIL.MakeStaticClass("Fusee.Engine.SimpleScene.SceneFinderExtensions", true, [], function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:true , Public:true }, "FindComponents", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")]), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $asm07.TypeRef("System.Predicate`1", [$asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")])]), 
      SceneFinderExtensions_FindComponents$00
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindComponents", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", ["!!0"]), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $asm07.TypeRef("System.Predicate`1", ["!!0"])], ["TComponent"]), 
      SceneFinderExtensions_FindComponents$b1$01
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindComponents", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")]), [$asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), $asm07.TypeRef("System.Predicate`1", [$asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")])]), 
      SceneFinderExtensions_FindComponents$02
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindComponents", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", ["!!0"]), [$asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), $asm07.TypeRef("System.Predicate`1", ["!!0"])], ["TComponent"]), 
      SceneFinderExtensions_FindComponents$b1$03
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindNodes", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $asm07.TypeRef("System.Predicate`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])]), 
      SceneFinderExtensions_FindNodes$04
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindNodes", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", ["!!0"]), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $asm07.TypeRef("System.Predicate`1", ["!!0"])], ["TNode"]), 
      SceneFinderExtensions_FindNodes$b1$05
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindNodes", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), [$asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), $asm07.TypeRef("System.Predicate`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])]), 
      SceneFinderExtensions_FindNodes$06
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindNodes", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", ["!!0"]), [$asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), $asm07.TypeRef("System.Predicate`1", ["!!0"])], ["TNode"]), 
      SceneFinderExtensions_FindNodes$b1$07
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindNodesWhereComponent", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $asm07.TypeRef("System.Predicate`1", [$asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")])]), 
      SceneFinderExtensions_FindNodesWhereComponent$08
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindNodesWhereComponent", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $asm07.TypeRef("System.Predicate`1", ["!!0"])], ["TComponent"]), 
      SceneFinderExtensions_FindNodesWhereComponent$b1$09
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindNodesWhereComponent", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", ["!!0"]), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"), $asm07.TypeRef("System.Predicate`1", ["!!1"])], ["TNode", "TComponent"]), 
      SceneFinderExtensions_FindNodesWhereComponent$b2$0A
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindNodesWhereComponent", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), [$asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), $asm07.TypeRef("System.Predicate`1", [$asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")])]), 
      SceneFinderExtensions_FindNodesWhereComponent$0B
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindNodesWhereComponent", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), [$asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), $asm07.TypeRef("System.Predicate`1", ["!!0"])], ["TComponent"]), 
      SceneFinderExtensions_FindNodesWhereComponent$b1$0C
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "FindNodesWhereComponent", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", ["!!0"]), [$asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), $asm07.TypeRef("System.Predicate`1", ["!!1"])], ["TNode", "TComponent"]), 
      SceneFinderExtensions_FindNodesWhereComponent$b2$0D
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    return function (newThisType) { $thisType = newThisType; }; 
  })
    .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

})();

/* class Fusee.Engine.SimpleScene.SceneFinderExtensions+SceneNodeEnumerable`1 */ 

(function SceneNodeEnumerable$b1$Members () {
  var $, $thisType;
  function SceneNodeEnumerable$b1__ctor () {
  };

  function SceneNodeEnumerable$b1_GetEnumerator () {
    return new ($asm03.Fusee.Engine.SimpleScene.SceneNodeFinder$b1.Of($thisType.TNode.get(this))) (this._rootList, this._match);
  };

  function SceneNodeEnumerable$b1_System_Collections_IEnumerable_GetEnumerator () {
    return this.GetEnumerator();
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.SceneFinderExtensions+SceneNodeEnumerable`1", 
      IsPublic: false, 
      IsReferenceType: true, 
      GenericParameters: ["TNode"], 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      SceneNodeEnumerable$b1__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "GetEnumerator", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$.GenericParameter("TNode")]), null), 
      SceneNodeEnumerable$b1_GetEnumerator
    );

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerable.GetEnumerator", 
      JSIL.MethodSignature.Return($asm07.TypeRef("System.Collections.IEnumerator")), 
      SceneNodeEnumerable$b1_System_Collections_IEnumerable_GetEnumerator
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerable"), "GetEnumerator");

    $.Field({Static:false, Public:false}, "_match", $asm07.TypeRef("System.Predicate`1", [$.GenericParameter("TNode")])); 
    $.Field({Static:false, Public:false}, "_rootList", $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])); 
    $.ImplementInterfaces(
      /* 0 */ $asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$.GenericParameter("TNode")]), 
      /* 1 */ $asm07.TypeRef("System.Collections.IEnumerable")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.SceneFinderExtensions+SceneComponentEnumerable`1 */ 

(function SceneComponentEnumerable$b1$Members () {
  var $, $thisType;
  function SceneComponentEnumerable$b1__ctor () {
  };

  function SceneComponentEnumerable$b1_GetEnumerator () {
    return new ($asm03.Fusee.Engine.SimpleScene.SceneComponentFinder$b1.Of($thisType.TComponent.get(this))) (this._rootList, this._match);
  };

  function SceneComponentEnumerable$b1_System_Collections_IEnumerable_GetEnumerator () {
    return this.GetEnumerator();
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.SceneFinderExtensions+SceneComponentEnumerable`1", 
      IsPublic: false, 
      IsReferenceType: true, 
      GenericParameters: ["TComponent"], 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      SceneComponentEnumerable$b1__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "GetEnumerator", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$.GenericParameter("TComponent")]), null), 
      SceneComponentEnumerable$b1_GetEnumerator
    );

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerable.GetEnumerator", 
      JSIL.MethodSignature.Return($asm07.TypeRef("System.Collections.IEnumerator")), 
      SceneComponentEnumerable$b1_System_Collections_IEnumerable_GetEnumerator
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerable"), "GetEnumerator");

    $.Field({Static:false, Public:false}, "_match", $asm07.TypeRef("System.Predicate`1", [$.GenericParameter("TComponent")])); 
    $.Field({Static:false, Public:false}, "_rootList", $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])); 
    $.ImplementInterfaces(
      /* 0 */ $asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$.GenericParameter("TComponent")]), 
      /* 1 */ $asm07.TypeRef("System.Collections.IEnumerable")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.SceneFinderExtensions+SceneNodeWhereComponentEnumerable`2 */ 

(function SceneNodeWhereComponentEnumerable$b2$Members () {
  var $, $thisType;
  function SceneNodeWhereComponentEnumerable$b2__ctor () {
  };

  function SceneNodeWhereComponentEnumerable$b2_GetEnumerator () {
    return new ($asm03.Fusee.Engine.SimpleScene.SceneNodeWhereComponentFinder$b2.Of($thisType.TNode.get(this), $thisType.TComponent.get(this))) (this._rootList, this._match);
  };

  function SceneNodeWhereComponentEnumerable$b2_System_Collections_IEnumerable_GetEnumerator () {
    return this.GetEnumerator();
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.SceneFinderExtensions+SceneNodeWhereComponentEnumerable`2", 
      IsPublic: false, 
      IsReferenceType: true, 
      GenericParameters: ["TNode", "TComponent"], 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      SceneNodeWhereComponentEnumerable$b2__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "GetEnumerator", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$.GenericParameter("TNode")]), null), 
      SceneNodeWhereComponentEnumerable$b2_GetEnumerator
    );

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerable.GetEnumerator", 
      JSIL.MethodSignature.Return($asm07.TypeRef("System.Collections.IEnumerator")), 
      SceneNodeWhereComponentEnumerable$b2_System_Collections_IEnumerable_GetEnumerator
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerable"), "GetEnumerator");

    $.Field({Static:false, Public:false}, "_match", $asm07.TypeRef("System.Predicate`1", [$.GenericParameter("TComponent")])); 
    $.Field({Static:false, Public:false}, "_rootList", $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])); 
    $.ImplementInterfaces(
      /* 0 */ $asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$.GenericParameter("TNode")]), 
      /* 1 */ $asm07.TypeRef("System.Collections.IEnumerable")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.SceneVisitor */ 

(function SceneVisitor$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm05.Fusee.Serialization.SceneNodeContainer)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm05.Fusee.Serialization.SceneComponentContainer)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitorHelpers_VisitComponentMethod)) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm07.System.Collections.Generic.Dictionary$b2.Of($asm07.System.Type, $asm03.Fusee.Engine.SimpleScene.SceneVisitorHelpers_VisitComponentMethod))) ();
  };
  var $T04 = function () {
    return ($T04 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitorHelpers_VisitNodeMethod)) ();
  };
  var $T05 = function () {
    return ($T05 = JSIL.Memoize($asm07.System.Collections.Generic.Dictionary$b2.Of($asm07.System.Type, $asm03.Fusee.Engine.SimpleScene.SceneVisitorHelpers_VisitNodeMethod))) ();
  };
  var $T06 = function () {
    return ($T06 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T07 = function () {
    return ($T07 = JSIL.Memoize($asm09.System.Collections.Generic.Stack$b1.Of($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer)))) ();
  };
  var $T08 = function () {
    return ($T08 = JSIL.Memoize($asm07.System.Collections.IEnumerator)) ();
  };
  var $T09 = function () {
    return ($T09 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneComponentContainer))) ();
  };
  var $T0A = function () {
    return ($T0A = JSIL.Memoize($asm07.System.Collections.Generic.List$b1_Enumerator.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T0B = function () {
    return ($T0B = JSIL.Memoize($asm07.System.Collections.Generic.List$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T0C = function () {
    return ($T0C = JSIL.Memoize($asm07.System.Collections.Generic.List$b1.Of($asm05.Fusee.Serialization.SceneComponentContainer))) ();
  };
  var $T0D = function () {
    return ($T0D = JSIL.Memoize($asm07.System.Boolean)) ();
  };
  var $T0E = function () {
    return ($T0E = JSIL.Memoize($asm07.System.Reflection.MethodInfo)) ();
  };
  var $T0F = function () {
    return ($T0F = JSIL.Memoize(System.Array.Of($asm07.System.Object))) ();
  };
  var $T10 = function () {
    return ($T10 = JSIL.Memoize($asm07.System.Reflection.MemberInfo)) ();
  };
  var $T11 = function () {
    return ($T11 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.VisitMethodAttribute)) ();
  };
  var $T12 = function () {
    return ($T12 = JSIL.Memoize($asm07.System.Collections.Generic.Dictionary$b2.Of($asm07.System.Type, $asm03.Fusee.Engine.SimpleScene.SceneVisitor_VisitorSet))) ();
  };
  var $T13 = function () {
    return ($T13 = JSIL.Memoize($asm07.System.Type)) ();
  };
  var $T14 = function () {
    return ($T14 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitor_VisitorSet)) ();
  };
  var $T15 = function () {
    return ($T15 = JSIL.Memoize(System.Array.Of($asm07.System.Reflection.MethodInfo))) ();
  };
  var $T16 = function () {
    return ($T16 = JSIL.Memoize($asm07.System.Reflection.BindingFlags)) ();
  };
  var $T17 = function () {
    return ($T17 = JSIL.Memoize($asm07.System.Int32)) ();
  };
  var $T18 = function () {
    return ($T18 = JSIL.Memoize(System.Array.Of($asm07.System.Reflection.ParameterInfo))) ();
  };
  var $T19 = function () {
    return ($T19 = JSIL.Memoize($asm07.System.Reflection.MethodBase)) ();
  };
  var $T1A = function () {
    return ($T1A = JSIL.Memoize($asm07.System.Reflection.ParameterInfo)) ();
  };
  var $T1B = function () {
    return ($T1B = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.VisitorCallerFactory)) ();
  };
  var $T1C = function () {
    return ($T1C = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerable$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T1D = function () {
    return ($T1D = JSIL.Memoize($asm07.System.IDisposable)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.ConstructorSignature($asm09.TypeRef("System.Collections.Generic.Stack`1", [$asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])]), null))) ();
  };
  var $S01 = function () {
    return ($S01 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm07.TypeRef("System.Type"), $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitor+VisitorSet")]), null))) ();
  };
  var $S02 = function () {
    return ($S02 = JSIL.Memoize(new JSIL.MethodSignature($asm07.TypeRef("System.Boolean"), [$asm07.TypeRef("System.Type")]))) ();
  };
  var $IM00 = function () {
    return ($IM00 = JSIL.Memoize($asm07.System.Collections.IEnumerator.MoveNext)) ();
  };
  var $IM01 = function () {
    return ($IM01 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneComponentContainer).get_Current)) ();
  };
  var $IM02 = function () {
    return ($IM02 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer).get_Current)) ();
  };
  var $IM03 = function () {
    return ($IM03 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerable$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer).GetEnumerator)) ();
  };
  var $IM04 = function () {
    return ($IM04 = JSIL.Memoize($asm07.System.IDisposable.Dispose)) ();
  };

  function SceneVisitor__ctor () {
  };

  function SceneVisitor_DoTraverse (node) {
    var $temp00;
    this.SceneVisitor$CurrentNode$value = node;
    this.PushState();
    this.DoVisitNode(node);
    this.DoVisitComponents(node);
    if (node.Children !== null) {

      for (var a$0 = node.Children._items, i$0 = 0, l$0 = (node.Children._size | 0); i$0 < l$0; ($temp00 = i$0, 
          i$0 = ((i$0 + 1) | 0), 
          $temp00)) {
        var current = a$0[i$0];
        this.DoTraverse(current);
      }
    }
    this.PopState();
    this.SceneVisitor$CurrentNode$value = null;
  };

  function SceneVisitor_DoTraverseNoComponents (node) {
    var $temp00;
    this.SceneVisitor$CurrentNode$value = node;
    this.PushState();
    this.DoVisitNode(node);
    if (node.Children !== null) {

      for (var a$0 = node.Children._items, i$0 = 0, l$0 = (node.Children._size | 0); i$0 < l$0; ($temp00 = i$0, 
          i$0 = ((i$0 + 1) | 0), 
          $temp00)) {
        var current = a$0[i$0];
        this.DoTraverseNoComponents(current);
      }
    }
    this.PopState();
    this.SceneVisitor$CurrentNode$value = null;
  };

  function SceneVisitor_DoVisitComponent (component) {
    var visitComponentMethod = new JSIL.BoxedVariable(null);
    if ((this._visitors.Components).TryGetValue(JSIL.GetType(component), /* ref */ visitComponentMethod)) {
      visitComponentMethod.get()(this, component);
    }
  };

  function SceneVisitor_DoVisitComponents (node) {
    var $temp00;
    if (node.Components !== null) {

      for (var a$0 = node.Components._items, i$0 = 0, l$0 = (node.Components._size | 0); i$0 < l$0; ($temp00 = i$0, 
          i$0 = ((i$0 + 1) | 0), 
          $temp00)) {
        var current = a$0[i$0];
        this.SceneVisitor$CurrentComponent$value = current;
        this.DoVisitComponent(current);
        this.SceneVisitor$CurrentComponent$value = null;
      }
    }
  };

  function SceneVisitor_DoVisitNode (node) {
    var visitNodeMethod = new JSIL.BoxedVariable(null);
    if ((this._visitors.Nodes).TryGetValue(JSIL.GetType(node), /* ref */ visitNodeMethod)) {
      visitNodeMethod.get()(this, node);
    }
  };

  function SceneVisitor_EnumInit (nodes) {
    if (nodes !== null) {
      this.ScanForVisitors();
      this.SceneVisitor$YieldOnCurrentNode$value = false;
      this.SceneVisitor$YieldOnCurrentComponent$value = false;
      if (this._nodeEnumeratorStack === null) {
        this._nodeEnumeratorStack = $S00().Construct();
      }
      $T07().prototype.Clear.call(this._nodeEnumeratorStack);
      this.InitState();
      this._curNodeEnumerator = nodes;
    }
  };

  function SceneVisitor_EnumMoveNext () {

    var $label0 = 0;
  $labelgroup0: 
    while (true) {
      switch ($label0) {
        case 0: /* $entry0 */ 
          this.SceneVisitor$YieldOnCurrentNode$value = false;
          this.SceneVisitor$YieldOnCurrentComponent$value = false;

        $loop0: 
          while (true) {
            if (this._curCompEnumerator !== null) {
              if (!$IM00().Call(this._curCompEnumerator, null)) {
                this._curCompEnumerator = null;
                this.SceneVisitor$CurrentComponent$value = null;
              } else {
                this.SceneVisitor$CurrentComponent$value = $IM01().Call(this._curCompEnumerator, null);
                this.DoVisitComponent(this.SceneVisitor$CurrentComponent$value);
                if (this.get_YieldEnumeration()) {
                  break $loop0;
                }
              }
            } else {

              while (!$IM00().Call(this._curNodeEnumerator, null)) {
                if (((this._nodeEnumeratorStack).get_Count() | 0) <= 0) {
                  $label0 = 1 /* goto IL_B7 */ ;
                  continue $labelgroup0;
                }
                this._curNodeEnumerator = $T07().prototype.Pop.call(this._nodeEnumeratorStack);
                this.PopState();
              }
              this.SceneVisitor$CurrentNode$value = $IM02().Call(this._curNodeEnumerator, null);
              if (this.SceneVisitor$CurrentNode$value.Children !== null) {
                this.PushState();
                var enumerator = $T0B().prototype.GetEnumerator.call(this.SceneVisitor$CurrentNode$value.Children);
                $T07().prototype.Push.call(this._nodeEnumeratorStack, this._curNodeEnumerator);
                this._curNodeEnumerator = enumerator.MemberwiseClone();
              }
              if (this.SceneVisitor$CurrentNode$value.Components !== null) {
                this._curCompEnumerator = $T0C().prototype.GetEnumerator.call(this.SceneVisitor$CurrentNode$value.Components).MemberwiseClone();
              }
              this.DoVisitNode(this.SceneVisitor$CurrentNode$value);
              if (this.SceneVisitor$YieldOnCurrentNode$value) {
                $label0 = 2 /* goto Block_8 */ ;
                continue $labelgroup0;
              }
            }
          }
          var result = true;
          return result;

          $label0 = 1 /* goto IL_B7 */ ;
          continue $labelgroup0;
        case 1: /* IL_B7 */ 
          $T07().prototype.Clear.call(this._nodeEnumeratorStack);
          this._nodeEnumeratorStack = null;
          this._curCompEnumerator = null;
          this._curNodeEnumerator = null;
          this.SceneVisitor$CurrentNode$value = null;
          this.SceneVisitor$CurrentComponent$value = null;
          result = false;
          return result;

          $label0 = 2 /* goto Block_8 */ ;
          continue $labelgroup0;
        case 2: /* Block_8 */ 
          result = true;
          return result;

          break $labelgroup0;
      }
    }
  };

  function SceneVisitor_EnumMoveNextNoComponent () {

    var $label0 = 0;
  $labelgroup0: 
    while (true) {
      switch ($label0) {
        case 0: /* $entry0 */ 
          this.SceneVisitor$YieldOnCurrentNode$value = false;
          this.SceneVisitor$YieldOnCurrentComponent$value = false;

          while (true) {

            while (!$IM00().Call(this._curNodeEnumerator, null)) {
              if (((this._nodeEnumeratorStack).get_Count() | 0) <= 0) {
                $label0 = 1 /* goto IL_4B */ ;
                continue $labelgroup0;
              }
              this._curNodeEnumerator = $T07().prototype.Pop.call(this._nodeEnumeratorStack);
              this.PopState();
            }
            this.SceneVisitor$CurrentNode$value = $IM02().Call(this._curNodeEnumerator, null);
            if (this.SceneVisitor$CurrentNode$value.Children !== null) {
              this.PushState();
              var enumerator = $T0B().prototype.GetEnumerator.call(this.SceneVisitor$CurrentNode$value.Children);
              $T07().prototype.Push.call(this._nodeEnumeratorStack, this._curNodeEnumerator);
              this._curNodeEnumerator = enumerator.MemberwiseClone();
            }
            this.DoVisitNode(this.SceneVisitor$CurrentNode$value);
            if (this.SceneVisitor$YieldOnCurrentNode$value) {
              $label0 = 2 /* goto Block_4 */ ;
              continue $labelgroup0;
            }
          }

          $label0 = 1 /* goto IL_4B */ ;
          continue $labelgroup0;
        case 1: /* IL_4B */ 
          $T07().prototype.Clear.call(this._nodeEnumeratorStack);
          this._nodeEnumeratorStack = null;
          this._curCompEnumerator = null;
          this._curNodeEnumerator = null;
          this.SceneVisitor$CurrentNode$value = null;
          this.SceneVisitor$CurrentComponent$value = null;
          var result = false;
          return result;

          $label0 = 2 /* goto Block_4 */ ;
          continue $labelgroup0;
        case 2: /* Block_4 */ 
          result = true;
          return result;

          break $labelgroup0;
      }
    }
  };

  function SceneVisitor_get_CurrentComponent () {
    return this.SceneVisitor$CurrentComponent$value;
  };

  function SceneVisitor_get_CurrentNode () {
    return this.SceneVisitor$CurrentNode$value;
  };

  function SceneVisitor_get_YieldEnumeration () {
    return (this.SceneVisitor$YieldOnCurrentComponent$value || this.SceneVisitor$YieldOnCurrentNode$value);
  };

  function SceneVisitor_get_YieldOnCurrentComponent () {
    return this.SceneVisitor$YieldOnCurrentComponent$value;
  };

  function SceneVisitor_get_YieldOnCurrentNode () {
    return this.SceneVisitor$YieldOnCurrentNode$value;
  };

  function SceneVisitor_InitState () {
  };

  function SceneVisitor_IsVisitor (methodInfo) {
    var customAttributes = methodInfo.GetCustomAttributes($T11().__Type__, false);
    return ((customAttributes !== null) && ((customAttributes.length | 0) > 0));
  };

  function SceneVisitor_PopState () {
  };

  function SceneVisitor_PushState () {
  };

  function SceneVisitor_ScanForVisitors () {
    if (this._visitors === null) {
      if ($thisType._visitorMap === null) {
        $thisType._visitorMap = $S01().Construct();
      }
      var type = JSIL.GetType(this);
      if (!$thisType._visitorMap.TryGetValue(type, /* ref */ new JSIL.MemberReference(this, "_visitors"))) {
        this._visitors = new ($T14())();
        var methods = type.GetMethods($T16().$Flags("Instance", "NonPublic", "Public"));

        for (var i = 0; i < (methods.length | 0); i = ((i + 1) | 0)) {
          var methodInfo = methods[i];
          if ($thisType.IsVisitor(methodInfo)) {
            var parameters = methodInfo.GetParameters();
            if ((parameters.length | 0) === 1) {
              var parameterType = (parameters[0]).get_ParameterType();
              if ($S02().CallVirtual("IsAssignableFrom", null, $T01().__Type__, parameterType)) {
                (this._visitors.Components).set_Item(parameterType, $T1B().MakeComponentVisitor(methodInfo));
              } else if ($S02().CallVirtual("IsAssignableFrom", null, $T00().__Type__, parameterType)) {
                (this._visitors.Nodes).set_Item(parameterType, $T1B().MakeNodeVistor(methodInfo));
              }
            }
          }
        }
        $thisType._visitorMap.Add(type, this._visitors);
      }
    }
  };

  function SceneVisitor_set_CurrentComponent (value) {
    this.SceneVisitor$CurrentComponent$value = value;
  };

  function SceneVisitor_set_CurrentNode (value) {
    this.SceneVisitor$CurrentNode$value = value;
  };

  function SceneVisitor_set_YieldOnCurrentComponent (value) {
    this.SceneVisitor$YieldOnCurrentComponent$value = value;
  };

  function SceneVisitor_set_YieldOnCurrentNode (value) {
    this.SceneVisitor$YieldOnCurrentNode$value = value;
  };

  function SceneVisitor_Traverse$00 (rootNode) {
    if (rootNode !== null) {
      this.ScanForVisitors();
      this.InitState();
      if (((this._visitors.Components).get_Count() | 0) > 0) {
        this.DoTraverse(rootNode);
      } else {
        this.DoTraverseNoComponents(rootNode);
      }
    }
  };

  function SceneVisitor_Traverse$01 (children) {
    if (children !== null) {
      this.ScanForVisitors();
      this.InitState();
      if (((this._visitors.Components).get_Count() | 0) > 0) {
        var enumerator = $IM03().Call(children, null);
        try {

          while ($IM00().Call(enumerator, null)) {
            var current = $IM02().Call(enumerator, null);
            this.DoTraverse(current);
          }
        } finally {
          if (enumerator !== null) {
            $IM04().Call(enumerator, null);
          }
        }
      } else {
        enumerator = $IM03().Call(children, null);
        try {

          while ($IM00().Call(enumerator, null)) {
            current = $IM02().Call(enumerator, null);
            this.DoTraverseNoComponents(current);
          }
        } finally {
          if (enumerator !== null) {
            $IM04().Call(enumerator, null);
          }
        }
      }
    }
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.SceneVisitor", 
      IsPublic: true, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      SceneVisitor__ctor
    );

    $.Method({Static:false, Public:false}, "DoTraverse", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")), 
      SceneVisitor_DoTraverse
    );

    $.Method({Static:false, Public:false}, "DoTraverseNoComponents", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")), 
      SceneVisitor_DoTraverseNoComponents
    );

    $.Method({Static:false, Public:false}, "DoVisitComponent", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")), 
      SceneVisitor_DoVisitComponent
    );

    $.Method({Static:false, Public:false}, "DoVisitComponents", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")), 
      SceneVisitor_DoVisitComponents
    );

    $.Method({Static:false, Public:false}, "DoVisitNode", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")), 
      SceneVisitor_DoVisitNode
    );

    $.Method({Static:false, Public:false}, "EnumInit", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])), 
      SceneVisitor_EnumInit
    );

    $.Method({Static:false, Public:false}, "EnumMoveNext", 
      JSIL.MethodSignature.Return($.Boolean), 
      SceneVisitor_EnumMoveNext
    );

    $.Method({Static:false, Public:false}, "EnumMoveNextNoComponent", 
      JSIL.MethodSignature.Return($.Boolean), 
      SceneVisitor_EnumMoveNextNoComponent
    );

    $.Method({Static:false, Public:false}, "get_CurrentComponent", 
      JSIL.MethodSignature.Return($asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")), 
      SceneVisitor_get_CurrentComponent
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

    $.Method({Static:false, Public:false}, "get_CurrentNode", 
      JSIL.MethodSignature.Return($asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")), 
      SceneVisitor_get_CurrentNode
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

    $.Method({Static:false, Public:false}, "get_YieldEnumeration", 
      JSIL.MethodSignature.Return($.Boolean), 
      SceneVisitor_get_YieldEnumeration
    );

    $.Method({Static:false, Public:false}, "get_YieldOnCurrentComponent", 
      JSIL.MethodSignature.Return($.Boolean), 
      SceneVisitor_get_YieldOnCurrentComponent
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

    $.Method({Static:false, Public:false}, "get_YieldOnCurrentNode", 
      JSIL.MethodSignature.Return($.Boolean), 
      SceneVisitor_get_YieldOnCurrentNode
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "InitState", 
      JSIL.MethodSignature.Void, 
      SceneVisitor_InitState
    );

    $.Method({Static:true , Public:false}, "IsVisitor", 
      new JSIL.MethodSignature($.Boolean, [$asm07.TypeRef("System.Reflection.MethodInfo")]), 
      SceneVisitor_IsVisitor
    );

    $.Method({Static:false, Public:false, Virtual:true }, "PopState", 
      JSIL.MethodSignature.Void, 
      SceneVisitor_PopState
    );

    $.Method({Static:false, Public:false, Virtual:true }, "PushState", 
      JSIL.MethodSignature.Void, 
      SceneVisitor_PushState
    );

    $.Method({Static:false, Public:false}, "ScanForVisitors", 
      JSIL.MethodSignature.Void, 
      SceneVisitor_ScanForVisitors
    );

    $.Method({Static:false, Public:false}, "set_CurrentComponent", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")), 
      SceneVisitor_set_CurrentComponent
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

    $.Method({Static:false, Public:false}, "set_CurrentNode", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")), 
      SceneVisitor_set_CurrentNode
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

    $.Method({Static:false, Public:false}, "set_YieldOnCurrentComponent", 
      JSIL.MethodSignature.Action($.Boolean), 
      SceneVisitor_set_YieldOnCurrentComponent
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

    $.Method({Static:false, Public:false}, "set_YieldOnCurrentNode", 
      JSIL.MethodSignature.Action($.Boolean), 
      SceneVisitor_set_YieldOnCurrentNode
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

    $.Method({Static:false, Public:true }, "Traverse", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")), 
      SceneVisitor_Traverse$00
    );

    $.Method({Static:false, Public:true }, "Traverse", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])), 
      SceneVisitor_Traverse$01
    );

    $.Field({Static:false, Public:false}, "_visitors", $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitor+VisitorSet")); 
    $.Field({Static:true , Public:false}, "_visitorMap", $asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm07.TypeRef("System.Type"), $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitor+VisitorSet")])); 
    $.Field({Static:false, Public:false}, "_nodeEnumeratorStack", $asm09.TypeRef("System.Collections.Generic.Stack`1", [$asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])])); 
    $.Field({Static:false, Public:false}, "_curNodeEnumerator", $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])); 
    $.Field({Static:false, Public:false}, "_curCompEnumerator", $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")])); 
    $.Field({Static:false, Public:false}, "SceneVisitor$CurrentNode$value", $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"))
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute")); 
    $.Field({Static:false, Public:false}, "SceneVisitor$CurrentComponent$value", $asm05.TypeRef("Fusee.Serialization.SceneComponentContainer"))
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute")); 
    $.Field({Static:false, Public:false}, "SceneVisitor$YieldOnCurrentNode$value", $.Boolean)
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute")); 
    $.Field({Static:false, Public:false}, "SceneVisitor$YieldOnCurrentComponent$value", $.Boolean)
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute")); 
    $.Property({Static:false, Public:false}, "CurrentNode", $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"));

    $.Property({Static:false, Public:false}, "CurrentComponent", $asm05.TypeRef("Fusee.Serialization.SceneComponentContainer"));

    $.Property({Static:false, Public:false}, "YieldOnCurrentNode", $.Boolean);

    $.Property({Static:false, Public:false}, "YieldOnCurrentComponent", $.Boolean);

    $.Property({Static:false, Public:false}, "YieldEnumeration", $.Boolean);

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.SceneVisitor+VisitorSet */ 

(function VisitorSet$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Collections.Generic.Dictionary$b2.Of($asm07.System.Type, $asm03.Fusee.Engine.SimpleScene.SceneVisitorHelpers_VisitNodeMethod))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm07.System.Collections.Generic.Dictionary$b2.Of($asm07.System.Type, $asm03.Fusee.Engine.SimpleScene.SceneVisitorHelpers_VisitComponentMethod))) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm07.TypeRef("System.Type"), $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitorHelpers+VisitNodeMethod")]), null))) ();
  };
  var $S01 = function () {
    return ($S01 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm07.TypeRef("System.Type"), $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitorHelpers+VisitComponentMethod")]), null))) ();
  };

  function VisitorSet__ctor () {
    this.Nodes = $S00().Construct();
    this.Components = $S01().Construct();
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.SceneVisitor+VisitorSet", 
      IsPublic: false, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      VisitorSet__ctor
    );

    $.Field({Static:false, Public:true }, "Nodes", $asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm07.TypeRef("System.Type"), $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitorHelpers+VisitNodeMethod")])); 
    $.Field({Static:false, Public:true }, "Components", $asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm07.TypeRef("System.Type"), $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitorHelpers+VisitComponentMethod")])); 
    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.SceneFinderBase`1 */ 

(function SceneFinderBase$b1$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitor)) ();
  };

  function SceneFinderBase$b1__ctor (rootList, match) {
    $T01().prototype._ctor.call(this);
    this._match = match;
    this._rootList = rootList;
    this.EnumInit(this._rootList);
  };

  function SceneFinderBase$b1_Dispose () {
    this._rootList = null;
    this._match = null;
  };

  function SceneFinderBase$b1_Reset () {
    this.EnumInit(this._rootList);
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitor"), 
      Name: "Fusee.Engine.SimpleScene.SceneFinderBase`1", 
      IsPublic: true, 
      IsReferenceType: true, 
      GenericParameters: ["TSceneElementType"], 
      MaximumConstructorArguments: 2, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      new JSIL.MethodSignature(null, [$asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), $asm07.TypeRef("System.Predicate`1", [$.GenericParameter("TSceneElementType")])]), 
      SceneFinderBase$b1__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Dispose", 
      JSIL.MethodSignature.Void, 
      SceneFinderBase$b1_Dispose
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Reset", 
      JSIL.MethodSignature.Void, 
      SceneFinderBase$b1_Reset
    );

    $.Field({Static:false, Public:false}, "_rootList", $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])); 
    $.Field({Static:false, Public:false}, "_match", $asm07.TypeRef("System.Predicate`1", [$.GenericParameter("TSceneElementType")])); 
    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.SceneNodeFinder`1 */ 

(function SceneNodeFinder$b1$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitor)) ();
  };

  function SceneNodeFinder$b1__ctor (rootList, match) {
    $asm03.Fusee.Engine.SimpleScene.SceneFinderBase$b1.Of($thisType.TNode.get(this)).prototype._ctor.call(this, rootList, match);
  };

  function SceneNodeFinder$b1_get_Current () {
    return $thisType.TNode.get(this).$Cast(this.SceneVisitor$CurrentNode$value);
  };

  function SceneNodeFinder$b1_MatchNode (node) {
    if (!((this._match === null) || !this._match(JSIL.CloneParameter($thisType.TNode.get(this), node)))) {
      this.SceneVisitor$YieldOnCurrentNode$value = true;
    }
  };

  function SceneNodeFinder$b1_MoveNext () {
    return this.EnumMoveNextNoComponent();
  };

  function SceneNodeFinder$b1_System_Collections_IEnumerator_get_Current () {
    return this.get_Current();
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneFinderBase`1", [new JSIL.GenericParameter("TNode", "Fusee.Engine.SimpleScene.SceneNodeFinder`1")]), 
      Name: "Fusee.Engine.SimpleScene.SceneNodeFinder`1", 
      IsPublic: true, 
      IsReferenceType: true, 
      GenericParameters: ["TNode"], 
      MaximumConstructorArguments: 2, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      new JSIL.MethodSignature(null, [$asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), $asm07.TypeRef("System.Predicate`1", [$.GenericParameter("TNode")])]), 
      SceneNodeFinder$b1__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "get_Current", 
      new JSIL.MethodSignature($.GenericParameter("TNode"), null), 
      SceneNodeFinder$b1_get_Current
    );

    $.Method({Static:false, Public:false}, "MatchNode", 
      new JSIL.MethodSignature(null, [$.GenericParameter("TNode")]), 
      SceneNodeFinder$b1_MatchNode
    )
      .Attribute($asm03.TypeRef("Fusee.Engine.SimpleScene.VisitMethodAttribute"));

    $.Method({Static:false, Public:true , Virtual:true }, "MoveNext", 
      JSIL.MethodSignature.Return($.Boolean), 
      SceneNodeFinder$b1_MoveNext
    );

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.get_Current", 
      JSIL.MethodSignature.Return($.Object), 
      SceneNodeFinder$b1_System_Collections_IEnumerator_get_Current
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerator"), "get_Current");

    $.Property({Static:false, Public:true , Virtual:true }, "Current", $.GenericParameter("TNode"));

    $.Property({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.Current", $.Object);

    $.ImplementInterfaces(
      /* 0 */ $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$.GenericParameter("TNode")]), 
      /* 1 */ $asm07.TypeRef("System.IDisposable"), 
      /* 2 */ $asm07.TypeRef("System.Collections.IEnumerator")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.SceneComponentFinder`1 */ 

(function SceneComponentFinder$b1$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitor)) ();
  };

  function SceneComponentFinder$b1__ctor (rootList, match) {
    $asm03.Fusee.Engine.SimpleScene.SceneFinderBase$b1.Of($thisType.TComponent.get(this)).prototype._ctor.call(this, rootList, match);
  };

  function SceneComponentFinder$b1_get_Current () {
    return $thisType.TComponent.get(this).$Cast(this.SceneVisitor$CurrentComponent$value);
  };

  function SceneComponentFinder$b1_MatchComponent (component) {
    if (!((this._match === null) || !this._match(JSIL.CloneParameter($thisType.TComponent.get(this), component)))) {
      this.SceneVisitor$YieldOnCurrentComponent$value = true;
    }
  };

  function SceneComponentFinder$b1_MoveNext () {
    return this.EnumMoveNext();
  };

  function SceneComponentFinder$b1_System_Collections_IEnumerator_get_Current () {
    return this.get_Current();
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneFinderBase`1", [new JSIL.GenericParameter("TComponent", "Fusee.Engine.SimpleScene.SceneComponentFinder`1")]), 
      Name: "Fusee.Engine.SimpleScene.SceneComponentFinder`1", 
      IsPublic: true, 
      IsReferenceType: true, 
      GenericParameters: ["TComponent"], 
      MaximumConstructorArguments: 2, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      new JSIL.MethodSignature(null, [$asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), $asm07.TypeRef("System.Predicate`1", [$.GenericParameter("TComponent")])]), 
      SceneComponentFinder$b1__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "get_Current", 
      new JSIL.MethodSignature($.GenericParameter("TComponent"), null), 
      SceneComponentFinder$b1_get_Current
    );

    $.Method({Static:false, Public:false}, "MatchComponent", 
      new JSIL.MethodSignature(null, [$.GenericParameter("TComponent")]), 
      SceneComponentFinder$b1_MatchComponent
    )
      .Attribute($asm03.TypeRef("Fusee.Engine.SimpleScene.VisitMethodAttribute"));

    $.Method({Static:false, Public:true , Virtual:true }, "MoveNext", 
      JSIL.MethodSignature.Return($.Boolean), 
      SceneComponentFinder$b1_MoveNext
    );

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.get_Current", 
      JSIL.MethodSignature.Return($.Object), 
      SceneComponentFinder$b1_System_Collections_IEnumerator_get_Current
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerator"), "get_Current");

    $.Property({Static:false, Public:true , Virtual:true }, "Current", $.GenericParameter("TComponent"));

    $.Property({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.Current", $.Object);

    $.ImplementInterfaces(
      /* 0 */ $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$.GenericParameter("TComponent")]), 
      /* 1 */ $asm07.TypeRef("System.IDisposable"), 
      /* 2 */ $asm07.TypeRef("System.Collections.IEnumerator")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.SceneNodeWhereComponentFinder`2 */ 

(function SceneNodeWhereComponentFinder$b2$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitor)) ();
  };

  function SceneNodeWhereComponentFinder$b2__ctor (rootList, match) {
    $asm03.Fusee.Engine.SimpleScene.SceneFinderBase$b1.Of($thisType.TComponent.get(this)).prototype._ctor.call(this, rootList, match);
  };

  function SceneNodeWhereComponentFinder$b2_get_Current () {
    return $thisType.TNode.get(this).$Cast(this.SceneVisitor$CurrentNode$value);
  };

  function SceneNodeWhereComponentFinder$b2_MatchComponent (component) {
    if (!((this._match === null) || !this._match(JSIL.CloneParameter($thisType.TComponent.get(this), component)))) {
      this.SceneVisitor$YieldOnCurrentComponent$value = true;
    }
  };

  function SceneNodeWhereComponentFinder$b2_MoveNext () {
    return this.EnumMoveNext();
  };

  function SceneNodeWhereComponentFinder$b2_System_Collections_IEnumerator_get_Current () {
    return this.get_Current();
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneFinderBase`1", [new JSIL.GenericParameter("TComponent", "Fusee.Engine.SimpleScene.SceneNodeWhereComponentFinder`2")]), 
      Name: "Fusee.Engine.SimpleScene.SceneNodeWhereComponentFinder`2", 
      IsPublic: true, 
      IsReferenceType: true, 
      GenericParameters: ["TNode", "TComponent"], 
      MaximumConstructorArguments: 2, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      new JSIL.MethodSignature(null, [$asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), $asm07.TypeRef("System.Predicate`1", [$.GenericParameter("TComponent")])]), 
      SceneNodeWhereComponentFinder$b2__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "get_Current", 
      new JSIL.MethodSignature($.GenericParameter("TNode"), null), 
      SceneNodeWhereComponentFinder$b2_get_Current
    );

    $.Method({Static:false, Public:false}, "MatchComponent", 
      new JSIL.MethodSignature(null, [$.GenericParameter("TComponent")]), 
      SceneNodeWhereComponentFinder$b2_MatchComponent
    )
      .Attribute($asm03.TypeRef("Fusee.Engine.SimpleScene.VisitMethodAttribute"));

    $.Method({Static:false, Public:true , Virtual:true }, "MoveNext", 
      JSIL.MethodSignature.Return($.Boolean), 
      SceneNodeWhereComponentFinder$b2_MoveNext
    );

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.get_Current", 
      JSIL.MethodSignature.Return($.Object), 
      SceneNodeWhereComponentFinder$b2_System_Collections_IEnumerator_get_Current
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerator"), "get_Current");

    $.Property({Static:false, Public:true , Virtual:true }, "Current", $.GenericParameter("TNode"));

    $.Property({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.Current", $.Object);

    $.ImplementInterfaces(
      /* 0 */ $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$.GenericParameter("TNode")]), 
      /* 1 */ $asm07.TypeRef("System.IDisposable"), 
      /* 2 */ $asm07.TypeRef("System.Collections.IEnumerator")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* struct Fusee.Engine.SimpleScene.PickResult */ 

(function PickResult$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.NotImplementedException)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.NotImplementedException"), null))) ();
  };

  function PickResult_get_ModelPos () {
    throw $S00().Construct();
  };

  function PickResult_get_ScreenPos () {
    throw $S00().Construct();
  };

  function PickResult_get_WorldPos () {
    throw $S00().Construct();
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.ValueType"), 
      Name: "Fusee.Engine.SimpleScene.PickResult", 
      IsPublic: true, 
      IsReferenceType: false, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, "get_ModelPos", 
      JSIL.MethodSignature.Return($asm04.TypeRef("Fusee.Math.float3")), 
      PickResult_get_ModelPos
    );

    $.Method({Static:false, Public:true }, "get_ScreenPos", 
      JSIL.MethodSignature.Return($asm04.TypeRef("Fusee.Math.float4")), 
      PickResult_get_ScreenPos
    );

    $.Method({Static:false, Public:true }, "get_WorldPos", 
      JSIL.MethodSignature.Return($asm04.TypeRef("Fusee.Math.float3")), 
      PickResult_get_WorldPos
    );

    $.Field({Static:false, Public:true }, "Node", $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")); 
    $.Field({Static:false, Public:true }, "Mesh", $asm05.TypeRef("Fusee.Serialization.MeshComponent")); 
    $.Field({Static:false, Public:true }, "Triangle", $.Int32); 
    $.Field({Static:false, Public:true }, "WA", $.Single); 
    $.Field({Static:false, Public:true }, "WB", $.Single); 
    $.Field({Static:false, Public:true }, "WC", $.Single); 
    $.Property({Static:false, Public:true }, "WorldPos", $asm04.TypeRef("Fusee.Math.float3"));

    $.Property({Static:false, Public:true }, "ModelPos", $asm04.TypeRef("Fusee.Math.float3"));

    $.Property({Static:false, Public:true }, "ScreenPos", $asm04.TypeRef("Fusee.Math.float4"));

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.ViseratorBase`1 */ 

(function ViseratorBase$b1$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitor)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };

  function ViseratorBase$b1__ctor () {
    var $s00 = new JSIL.ConstructorSignature($asm09.TypeRef("System.Collections.Generic.Queue`1", [$thisType.TItem.get(this)]), [$asm07.System.Int32]);
    this._itemQueue = $s00.Construct(1);
    $T00().prototype._ctor.call(this);
  };

  function ViseratorBase$b1_Dispose () {
    this._rootList = null;
  };

  function ViseratorBase$b1_get_Current () {
    return $asm09.System.Collections.Generic.Queue$b1.Of($thisType.TItem.get(this)).prototype.Dequeue.call(this._itemQueue);
  };

  function ViseratorBase$b1_Init (rootList) {
    this._rootList = rootList;
    this.EnumInit(this._rootList);
  };

  function ViseratorBase$b1_MoveNext () {
    return ((((this._itemQueue).get_Count() | 0) > 0) || this.EnumMoveNext());
  };

  function ViseratorBase$b1_Reset () {
    this.EnumInit(this._rootList);
  };

  function ViseratorBase$b1_System_Collections_IEnumerator_get_Current () {
    return this.get_Current();
  };

  function ViseratorBase$b1_YieldItem (item) {
    this.SceneVisitor$YieldOnCurrentComponent$value = true;
    $asm09.System.Collections.Generic.Queue$b1.Of($thisType.TItem.get(this)).prototype.Enqueue.call(this._itemQueue, JSIL.CloneParameter($thisType.TItem.get(this), item));
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitor"), 
      Name: "Fusee.Engine.SimpleScene.ViseratorBase`1", 
      IsPublic: true, 
      IsReferenceType: true, 
      GenericParameters: ["TItem"], 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      ViseratorBase$b1__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Dispose", 
      JSIL.MethodSignature.Void, 
      ViseratorBase$b1_Dispose
    );

    $.Method({Static:false, Public:true , Virtual:true }, "get_Current", 
      new JSIL.MethodSignature($.GenericParameter("TItem"), null), 
      ViseratorBase$b1_get_Current
    );

    $.Method({Static:false, Public:false, Virtual:true }, "Init", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])), 
      ViseratorBase$b1_Init
    );

    $.Method({Static:false, Public:true , Virtual:true }, "MoveNext", 
      JSIL.MethodSignature.Return($.Boolean), 
      ViseratorBase$b1_MoveNext
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Reset", 
      JSIL.MethodSignature.Void, 
      ViseratorBase$b1_Reset
    );

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.get_Current", 
      JSIL.MethodSignature.Return($.Object), 
      ViseratorBase$b1_System_Collections_IEnumerator_get_Current
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerator"), "get_Current");

    $.Method({Static:false, Public:false}, "YieldItem", 
      new JSIL.MethodSignature(null, [$.GenericParameter("TItem")]), 
      ViseratorBase$b1_YieldItem
    );

    $.Field({Static:false, Public:false}, "_rootList", $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])); 
    $.Field({Static:false, Public:false}, "_itemQueue", $asm09.TypeRef("System.Collections.Generic.Queue`1", [$.GenericParameter("TItem")])); 
    $.Property({Static:false, Public:true , Virtual:true }, "Current", $.GenericParameter("TItem"));

    $.Property({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.Current", $.Object);

    $.ImplementInterfaces(
      /* 0 */ $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$.GenericParameter("TItem")]), 
      /* 1 */ $asm07.TypeRef("System.IDisposable"), 
      /* 2 */ $asm07.TypeRef("System.Collections.IEnumerator")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.Viserator`2 */ 

(function Viserator$b2$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm07.System.Activator)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.IStateStack)) ();
  };
  var $IM00 = function () {
    return ($IM00 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.IStateStack.Clear)) ();
  };
  var $IM01 = function () {
    return ($IM01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.IStateStack.Pop)) ();
  };
  var $IM02 = function () {
    return ($IM02 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.IStateStack.Push)) ();
  };

  function Viserator$b2__ctor$00 () {
    $asm03.Fusee.Engine.SimpleScene.ViseratorBase$b1.Of($thisType.TItem.get(this)).prototype._ctor.call(this);
  };

  function Viserator$b2__ctor$01 (rootList) {
    $asm03.Fusee.Engine.SimpleScene.ViseratorBase$b1.Of($thisType.TItem.get(this)).prototype._ctor.call(this);
    this.Init(rootList);
  };

  function Viserator$b2_Init (rootList) {
    this.State = JSIL.CloneParameter($thisType.TState.get(this), (
        ((
            $thisType.TState.get(this).IsValueType
               ? JSIL.CreateInstanceOfType($thisType.TState.get(this))
               : null)
           === null)
           ? $T01().CreateInstance$b1($thisType.TState.get(this))()
           : (
            $thisType.TState.get(this).IsValueType
               ? JSIL.CreateInstanceOfType($thisType.TState.get(this))
               : null)
      )
    );
    $asm03.Fusee.Engine.SimpleScene.ViseratorBase$b1.Of($thisType.TItem.get(this)).prototype.Init.call(this, rootList);
  };

  function Viserator$b2_InitState () {
    $IM00().Call(this.State, null);
  };

  function Viserator$b2_PopState () {
    $IM01().Call(this.State, null);
  };

  function Viserator$b2_PushState () {
    $IM02().Call(this.State, null);
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.ViseratorBase`1", [new JSIL.GenericParameter("TItem", "Fusee.Engine.SimpleScene.Viserator`2")]), 
      Name: "Fusee.Engine.SimpleScene.Viserator`2", 
      IsPublic: true, 
      IsReferenceType: true, 
      GenericParameters: ["TItem", "TState"], 
      MaximumConstructorArguments: 1, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      Viserator$b2__ctor$00
    );

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])), 
      Viserator$b2__ctor$01
    );

    $.Method({Static:false, Public:false, Virtual:true }, "Init", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])), 
      Viserator$b2_Init
    );

    $.Method({Static:false, Public:false, Virtual:true }, "InitState", 
      JSIL.MethodSignature.Void, 
      Viserator$b2_InitState
    );

    $.Method({Static:false, Public:false, Virtual:true }, "PopState", 
      JSIL.MethodSignature.Void, 
      Viserator$b2_PopState
    );

    $.Method({Static:false, Public:false, Virtual:true }, "PushState", 
      JSIL.MethodSignature.Void, 
      Viserator$b2_PushState
    );

    $.Field({Static:false, Public:false}, "State", $.GenericParameter("TState")); 
    $.ImplementInterfaces(
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.ScenePicker */ 

(function ScenePicker$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerator$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.Viserator$b2.Of($asm03.Fusee.Engine.SimpleScene.PickResult, $asm03.Fusee.Engine.SimpleScene.ScenePicker_PickingState))) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.ScenePicker_PickingState)) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm04.Fusee.Math.float4x4)) ();
  };
  var $T04 = function () {
    return ($T04 = JSIL.Memoize($asm05.Fusee.Serialization.MeshComponent)) ();
  };
  var $T05 = function () {
    return ($T05 = JSIL.Memoize($asm05.Fusee.Serialization.TransformComponent)) ();
  };
  var $T06 = function () {
    return ($T06 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.ContainerExtensions)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.MethodSignature($asm04.TypeRef("Fusee.Math.float4x4"), [$asm04.TypeRef("Fusee.Math.float4x4"), $asm04.TypeRef("Fusee.Math.float4x4")]))) ();
  };

  function ScenePicker__ctor (rootList) {
    $T01().prototype._ctor.call(this, rootList);
    (this.State.Model = $T03().Identity.MemberwiseClone());
  };

  function ScenePicker_PickMesh (meshComponent) {
  };

  function ScenePicker_PickTransform (transform) {
    this.State.Model = $S00().CallStatic($T03(), "op_Multiply", null, this.State.Model.MemberwiseClone(), $T06().Matrix(transform).MemberwiseClone()).MemberwiseClone();
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.Viserator`2", [$asm03.TypeRef("Fusee.Engine.SimpleScene.PickResult"), $asm03.TypeRef("Fusee.Engine.SimpleScene.ScenePicker+PickingState")]), 
      Name: "Fusee.Engine.SimpleScene.ScenePicker", 
      IsPublic: true, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 1, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])), 
      ScenePicker__ctor
    );

    $.Method({Static:false, Public:true }, "PickMesh", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.MeshComponent")), 
      ScenePicker_PickMesh
    )
      .Attribute($asm03.TypeRef("Fusee.Engine.SimpleScene.VisitMethodAttribute"));

    $.Method({Static:false, Public:true }, "PickTransform", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.TransformComponent")), 
      ScenePicker_PickTransform
    )
      .Attribute($asm03.TypeRef("Fusee.Engine.SimpleScene.VisitMethodAttribute"));

    $.ImplementInterfaces(
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.VisitorState */ 

(function VisitorState$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Collections.Generic.List$b1.Of($asm03.Fusee.Engine.SimpleScene.IStateStack))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.IStateStack)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm0B.System.Linq.Enumerable)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.List`1", [$asm03.TypeRef("Fusee.Engine.SimpleScene.IStateStack")]), null))) ();
  };
  var $S01 = function () {
    return ($S01 = JSIL.Memoize(new JSIL.MethodSignature("!!0", [$asm07.TypeRef("System.Collections.Generic.IEnumerable`1", ["!!0"])], ["TSource"]))) ();
  };
  var $S02 = function () {
    return ($S02 = JSIL.Memoize(new JSIL.MethodSignature(null, [$asm03.TypeRef("Fusee.Engine.SimpleScene.IStateStack")]))) ();
  };
  var $IM00 = function () {
    return ($IM00 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.IStateStack.Clear)) ();
  };
  var $IM01 = function () {
    return ($IM01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.IStateStack.get_Depth)) ();
  };
  var $IM02 = function () {
    return ($IM02 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.IStateStack.Pop)) ();
  };
  var $IM03 = function () {
    return ($IM03 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.IStateStack.Push)) ();
  };

  function VisitorState__ctor () {
    this._stacks = $S00().Construct();
  };

  function VisitorState_Clear () {
    var $temp00;

    for (var a$0 = this._stacks._items, i$0 = 0, l$0 = (this._stacks._size | 0); i$0 < l$0; ($temp00 = i$0, 
        i$0 = ((i$0 + 1) | 0), 
        $temp00)) {
      var current = a$0[i$0];
      $IM00().Call(current, null);
    }
  };

  function VisitorState_get_Depth () {
    return $IM01().Call($S01().CallStatic($T02(), "First$b1", [$asm03.Fusee.Engine.SimpleScene.IStateStack], this._stacks), null);
  };

  function VisitorState_Pop () {
    var $temp00;

    for (var a$0 = this._stacks._items, i$0 = 0, l$0 = (this._stacks._size | 0); i$0 < l$0; ($temp00 = i$0, 
        i$0 = ((i$0 + 1) | 0), 
        $temp00)) {
      var current = a$0[i$0];
      $IM02().Call(current, null);
    }
  };

  function VisitorState_Push () {
    var $temp00;

    for (var a$0 = this._stacks._items, i$0 = 0, l$0 = (this._stacks._size | 0); i$0 < l$0; ($temp00 = i$0, 
        i$0 = ((i$0 + 1) | 0), 
        $temp00)) {
      var current = a$0[i$0];
      $IM03().Call(current, null);
    }
  };

  function VisitorState_RegisterState (stack) {
    $S02().CallVirtual("Add", null, this._stacks, stack);
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.VisitorState", 
      IsPublic: true, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      VisitorState__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Clear", 
      JSIL.MethodSignature.Void, 
      VisitorState_Clear
    );

    $.Method({Static:false, Public:true , Virtual:true }, "get_Depth", 
      JSIL.MethodSignature.Return($.Int32), 
      VisitorState_get_Depth
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Pop", 
      JSIL.MethodSignature.Void, 
      VisitorState_Pop
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Push", 
      JSIL.MethodSignature.Void, 
      VisitorState_Push
    );

    $.Method({Static:false, Public:false}, "RegisterState", 
      JSIL.MethodSignature.Action($asm03.TypeRef("Fusee.Engine.SimpleScene.IStateStack")), 
      VisitorState_RegisterState
    );

    $.Field({Static:false, Public:false}, "_stacks", $asm07.TypeRef("System.Collections.Generic.List`1", [$asm03.TypeRef("Fusee.Engine.SimpleScene.IStateStack")])); 
    $.Property({Static:false, Public:true , Virtual:true }, "Depth", $.Int32);

    $.ImplementInterfaces(
      /* 0 */ $asm03.TypeRef("Fusee.Engine.SimpleScene.IStateStack")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.ScenePicker+PickingState */ 

(function PickingState$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.CollapsingStateStack$b1.Of($asm04.Fusee.Math.float4x4))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.VisitorState)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm04.Fusee.Math.float4x4)) ();
  };

  function PickingState__ctor () {
    this._model = new ($T00())(4);
    this._view = new ($T00())(4);
    this._projection = new ($T00())(4);
    $T01().prototype._ctor.call(this);
    this.RegisterState(this._model);
    this.RegisterState(this._view);
    this.RegisterState(this._projection);
  };

  function PickingState_get_Model () {
    return (this._model).get_Tos();
  };

  function PickingState_get_Projection () {
    return (this._projection).get_Tos();
  };

  function PickingState_get_View () {
    return (this._view).get_Tos();
  };

  function PickingState_set_Model (value) {
    (this._model).set_Tos(value.MemberwiseClone());
  };

  function PickingState_set_Projection (value) {
    (this._projection).set_Tos(value.MemberwiseClone());
  };

  function PickingState_set_View (value) {
    (this._view).set_Tos(value.MemberwiseClone());
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.VisitorState"), 
      Name: "Fusee.Engine.SimpleScene.ScenePicker+PickingState", 
      IsPublic: false, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      PickingState__ctor
    );

    $.Method({Static:false, Public:true }, "get_Model", 
      JSIL.MethodSignature.Return($asm04.TypeRef("Fusee.Math.float4x4")), 
      PickingState_get_Model
    );

    $.Method({Static:false, Public:true }, "get_Projection", 
      JSIL.MethodSignature.Return($asm04.TypeRef("Fusee.Math.float4x4")), 
      PickingState_get_Projection
    );

    $.Method({Static:false, Public:true }, "get_View", 
      JSIL.MethodSignature.Return($asm04.TypeRef("Fusee.Math.float4x4")), 
      PickingState_get_View
    );

    $.Method({Static:false, Public:true }, "set_Model", 
      JSIL.MethodSignature.Action($asm04.TypeRef("Fusee.Math.float4x4")), 
      PickingState_set_Model
    );

    $.Method({Static:false, Public:true }, "set_Projection", 
      JSIL.MethodSignature.Action($asm04.TypeRef("Fusee.Math.float4x4")), 
      PickingState_set_Projection
    );

    $.Method({Static:false, Public:true }, "set_View", 
      JSIL.MethodSignature.Action($asm04.TypeRef("Fusee.Math.float4x4")), 
      PickingState_set_View
    );

    $.Field({Static:false, Public:false}, "_model", $asm03.TypeRef("Fusee.Engine.SimpleScene.CollapsingStateStack`1", [$asm04.TypeRef("Fusee.Math.float4x4")])); 
    $.Field({Static:false, Public:false}, "_view", $asm03.TypeRef("Fusee.Engine.SimpleScene.CollapsingStateStack`1", [$asm04.TypeRef("Fusee.Math.float4x4")])); 
    $.Field({Static:false, Public:false}, "_projection", $asm03.TypeRef("Fusee.Engine.SimpleScene.CollapsingStateStack`1", [$asm04.TypeRef("Fusee.Math.float4x4")])); 
    $.Property({Static:false, Public:true }, "Model", $asm04.TypeRef("Fusee.Math.float4x4"));

    $.Property({Static:false, Public:true }, "View", $asm04.TypeRef("Fusee.Math.float4x4"));

    $.Property({Static:false, Public:true }, "Projection", $asm04.TypeRef("Fusee.Math.float4x4"));

    $.ImplementInterfaces(
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* interface Fusee.Engine.SimpleScene.IStateStack */ 

JSIL.MakeInterface(
  "Fusee.Engine.SimpleScene.IStateStack", true, [], function ($) {
    $.Method({}, "Push", JSIL.MethodSignature.Void);
    $.Method({}, "Pop", JSIL.MethodSignature.Void);
    $.Method({}, "Clear", JSIL.MethodSignature.Void);
    $.Method({}, "get_Depth", JSIL.MethodSignature.Return($.Int32));
    $.Property({}, "Depth");
  }, []);

/* class Fusee.Engine.SimpleScene.AABBCalculator */ 

(function AABBCalculator$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm05.Fusee.Serialization.SceneContainer)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.AABBCalculator_AABBState)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitor)) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerable$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $T04 = function () {
    return ($T04 = JSIL.Memoize($asm05.Fusee.Serialization.SceneNodeContainer)) ();
  };
  var $T05 = function () {
    return ($T05 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitorHelpers)) ();
  };
  var $T06 = function () {
    return ($T06 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.VisitorState)) ();
  };
  var $T07 = function () {
    return ($T07 = JSIL.Memoize($asm04.Fusee.Math.float4x4)) ();
  };
  var $T08 = function () {
    return ($T08 = JSIL.Memoize($asm05.Fusee.Serialization.MeshComponent)) ();
  };
  var $T09 = function () {
    return ($T09 = JSIL.Memoize($asm04.Fusee.Math.AABBf)) ();
  };
  var $T0A = function () {
    return ($T0A = JSIL.Memoize($asm05.Fusee.Serialization.TransformComponent)) ();
  };
  var $T0B = function () {
    return ($T0B = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.ContainerExtensions)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(JSIL.MethodSignature.Action($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])))) ();
  };
  var $S01 = function () {
    return ($S01 = JSIL.Memoize(new JSIL.MethodSignature($asm04.TypeRef("Fusee.Math.float4x4"), [$asm04.TypeRef("Fusee.Math.float4x4"), $asm04.TypeRef("Fusee.Math.float4x4")]))) ();
  };

  function AABBCalculator__ctor$00 (sc) {
    this._state = new ($T01())();
    $T02().prototype._ctor.call(this);
    this._sncList = sc.Children;
  };

  function AABBCalculator__ctor$01 (sncList) {
    this._state = new ($T01())();
    $T02().prototype._ctor.call(this);
    this._sncList = sncList;
  };

  function AABBCalculator__ctor$02 (snc) {
    this._state = new ($T01())();
    $T02().prototype._ctor.call(this);
    this._sncList = $T05().SingleRootEnumerable(snc);
  };

  function AABBCalculator_GetBox () {
    $S00().CallVirtual("Traverse", null, this, this._sncList);
    if (this._boxValid) {
      var result = this._result.MemberwiseClone();
    } else {
      result = null;
    }
    return result;
  };

  function AABBCalculator_InitState () {
    this._boxValid = false;
    (this._state).Clear();
    (this._state.ModelView = $T07().Identity.MemberwiseClone());
  };

  function AABBCalculator_OnMesh (meshComponent) {
    var aABBf = $T09().op_Multiply((this._state).get_ModelView(), meshComponent.BoundingBox.MemberwiseClone()).MemberwiseClone();
    if (!this._boxValid) {
      this._result = aABBf.MemberwiseClone();
      this._boxValid = true;
    } else {
      this._result = $T09().Union(this._result, aABBf).MemberwiseClone();
    }
  };

  function AABBCalculator_OnTransform (transform) {
    this._state.ModelView = $S01().CallStatic($T07(), "op_Multiply", null, this._state.ModelView.MemberwiseClone(), $T0B().Matrix(transform).MemberwiseClone()).MemberwiseClone();
  };

  function AABBCalculator_PopState () {
    (this._state).Pop();
  };

  function AABBCalculator_PushState () {
    (this._state).Push();
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitor"), 
      Name: "Fusee.Engine.SimpleScene.AABBCalculator", 
      IsPublic: true, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 1, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.SceneContainer")), 
      AABBCalculator__ctor$00
    );

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])), 
      AABBCalculator__ctor$01
    );

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")), 
      AABBCalculator__ctor$02
    );

    $.Method({Static:false, Public:true }, "GetBox", 
      JSIL.MethodSignature.Return($asm07.TypeRef("System.Nullable`1", [$asm04.TypeRef("Fusee.Math.AABBf")])), 
      AABBCalculator_GetBox
    );

    $.Method({Static:false, Public:false, Virtual:true }, "InitState", 
      JSIL.MethodSignature.Void, 
      AABBCalculator_InitState
    );

    $.Method({Static:false, Public:true }, "OnMesh", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.MeshComponent")), 
      AABBCalculator_OnMesh
    )
      .Attribute($asm03.TypeRef("Fusee.Engine.SimpleScene.VisitMethodAttribute"));

    $.Method({Static:false, Public:true }, "OnTransform", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.TransformComponent")), 
      AABBCalculator_OnTransform
    )
      .Attribute($asm03.TypeRef("Fusee.Engine.SimpleScene.VisitMethodAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "PopState", 
      JSIL.MethodSignature.Void, 
      AABBCalculator_PopState
    );

    $.Method({Static:false, Public:false, Virtual:true }, "PushState", 
      JSIL.MethodSignature.Void, 
      AABBCalculator_PushState
    );

    $.Field({Static:false, Public:false}, "_sncList", $asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])); 
    $.Field({Static:false, Public:false}, "_state", $asm03.TypeRef("Fusee.Engine.SimpleScene.AABBCalculator+AABBState")); 
    $.Field({Static:false, Public:false}, "_boxValid", $.Boolean); 
    $.Field({Static:false, Public:false}, "_result", $asm04.TypeRef("Fusee.Math.AABBf")); 
    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.AABBCalculator+AABBState */ 

(function AABBState$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.CollapsingStateStack$b1.Of($asm04.Fusee.Math.float4x4))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.VisitorState)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm04.Fusee.Math.float4x4)) ();
  };

  function AABBState__ctor () {
    this._modelView = new ($T00())(4);
    $T01().prototype._ctor.call(this);
    this.RegisterState(this._modelView);
  };

  function AABBState_get_ModelView () {
    return (this._modelView).get_Tos();
  };

  function AABBState_set_ModelView (value) {
    (this._modelView).set_Tos(value.MemberwiseClone());
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.VisitorState"), 
      Name: "Fusee.Engine.SimpleScene.AABBCalculator+AABBState", 
      IsPublic: false, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      AABBState__ctor
    );

    $.Method({Static:false, Public:true }, "get_ModelView", 
      JSIL.MethodSignature.Return($asm04.TypeRef("Fusee.Math.float4x4")), 
      AABBState_get_ModelView
    );

    $.Method({Static:false, Public:true }, "set_ModelView", 
      JSIL.MethodSignature.Action($asm04.TypeRef("Fusee.Math.float4x4")), 
      AABBState_set_ModelView
    );

    $.Field({Static:false, Public:false}, "_modelView", $asm03.TypeRef("Fusee.Engine.SimpleScene.CollapsingStateStack`1", [$asm04.TypeRef("Fusee.Math.float4x4")])); 
    $.Property({Static:false, Public:true }, "ModelView", $asm04.TypeRef("Fusee.Math.float4x4"));

    $.ImplementInterfaces(
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.LightInfo */ 

(function LightInfo$Members () {
  var $, $thisType;
  function LightInfo__ctor () {
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.LightInfo", 
      IsPublic: false, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      LightInfo__ctor
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.SceneRenderer */ 

(function SceneRenderer$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm05.Fusee.Serialization.SceneContainer)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm07.System.String)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitor)) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm07.System.Collections.Generic.List$b1.Of($asm03.Fusee.Engine.SimpleScene.LightInfo))) ();
  };
  var $T04 = function () {
    return ($T04 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneRenderer_RendererState)) ();
  };
  var $T05 = function () {
    return ($T05 = JSIL.Memoize($asm05.Fusee.Serialization.MaterialComponent)) ();
  };
  var $T06 = function () {
    return ($T06 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.ShaderCodeBuilder)) ();
  };
  var $T07 = function () {
    return ($T07 = JSIL.Memoize($asm07.System.Collections.Generic.List$b1.Of($asm02.Fusee.Engine.EffectParameterDeclaration))) ();
  };
  var $T08 = function () {
    return ($T08 = JSIL.Memoize($asm02.Fusee.Engine.EffectParameterDeclaration)) ();
  };
  var $T09 = function () {
    return ($T09 = JSIL.Memoize($asm04.Fusee.Math.float3)) ();
  };
  var $T0A = function () {
    return ($T0A = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.VisitorState)) ();
  };
  var $T0B = function () {
    return ($T0B = JSIL.Memoize($asm04.Fusee.Math.float4x4)) ();
  };
  var $T0C = function () {
    return ($T0C = JSIL.Memoize($asm02.Fusee.Engine.RenderContext)) ();
  };
  var $T0D = function () {
    return ($T0D = JSIL.Memoize($asm07.System.IO.Path)) ();
  };
  var $T0E = function () {
    return ($T0E = JSIL.Memoize($asm01.Fusee.Engine.ImageData)) ();
  };
  var $T0F = function () {
    return ($T0F = JSIL.Memoize($asm02.Fusee.Engine.ShaderEffect)) ();
  };
  var $T10 = function () {
    return ($T10 = JSIL.Memoize($asm07.System.Collections.Generic.Dictionary$b2.Of($asm05.Fusee.Serialization.MaterialComponent, $asm02.Fusee.Engine.ShaderEffect))) ();
  };
  var $T11 = function () {
    return ($T11 = JSIL.Memoize(System.Array.Of($asm02.Fusee.Engine.EffectPassDeclaration))) ();
  };
  var $T12 = function () {
    return ($T12 = JSIL.Memoize($asm02.Fusee.Engine.EffectPassDeclaration)) ();
  };
  var $T13 = function () {
    return ($T13 = JSIL.Memoize($asm02.Fusee.Engine.RenderStateSet)) ();
  };
  var $T14 = function () {
    return ($T14 = JSIL.Memoize($asm05.Fusee.Serialization.MeshComponent)) ();
  };
  var $T15 = function () {
    return ($T15 = JSIL.Memoize($asm02.Fusee.Engine.Mesh)) ();
  };
  var $T16 = function () {
    return ($T16 = JSIL.Memoize($asm07.System.Collections.Generic.Dictionary$b2.Of($asm05.Fusee.Serialization.MeshComponent, $asm02.Fusee.Engine.Mesh))) ();
  };
  var $T17 = function () {
    return ($T17 = JSIL.Memoize($asm05.Fusee.Serialization.TransformComponent)) ();
  };
  var $T18 = function () {
    return ($T18 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.ContainerExtensions)) ();
  };
  var $T19 = function () {
    return ($T19 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.LightInfo)) ();
  };
  var $T1A = function () {
    return ($T1A = JSIL.Memoize($asm04.Fusee.Math.float4)) ();
  };
  var $T1B = function () {
    return ($T1B = JSIL.Memoize($asm07.System.ArgumentNullException)) ();
  };
  var $T1C = function () {
    return ($T1C = JSIL.Memoize($asm05.Fusee.Serialization.MatChannelContainer)) ();
  };
  var $T1D = function () {
    return ($T1D = JSIL.Memoize($asm05.Fusee.Serialization.SpecularChannelContainer)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.List`1", [$asm03.TypeRef("Fusee.Engine.SimpleScene.LightInfo")]), null))) ();
  };
  var $S01 = function () {
    return ($S01 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.List`1", [$asm02.TypeRef("Fusee.Engine.EffectParameterDeclaration")]), null))) ();
  };
  var $S02 = function () {
    return ($S02 = JSIL.Memoize(new JSIL.MethodSignature(null, [$asm02.TypeRef("Fusee.Engine.EffectParameterDeclaration")]))) ();
  };
  var $S03 = function () {
    return ($S03 = JSIL.Memoize(new JSIL.ConstructorSignature($asm04.TypeRef("Fusee.Math.float3"), [
        $asm07.TypeRef("System.Single"), $asm07.TypeRef("System.Single"), 
        $asm07.TypeRef("System.Single")
      ]))) ();
  };
  var $S04 = function () {
    return ($S04 = JSIL.Memoize(new JSIL.MethodSignature($asm04.TypeRef("Fusee.Math.float4x4"), [$asm04.TypeRef("Fusee.Math.float4x4"), $asm04.TypeRef("Fusee.Math.float4x4")]))) ();
  };
  var $S05 = function () {
    return ($S05 = JSIL.Memoize(JSIL.MethodSignature.Action($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])))) ();
  };
  var $S06 = function () {
    return ($S06 = JSIL.Memoize(new JSIL.MethodSignature($asm04.TypeRef("Fusee.Math.float4"), [$asm04.TypeRef("Fusee.Math.float4x4"), $asm04.TypeRef("Fusee.Math.float4")]))) ();
  };
  var $S07 = function () {
    return ($S07 = JSIL.Memoize(new JSIL.ConstructorSignature($asm04.TypeRef("Fusee.Math.float4"), [
        $asm07.TypeRef("System.Single"), $asm07.TypeRef("System.Single"), 
        $asm07.TypeRef("System.Single"), $asm07.TypeRef("System.Single")
      ]))) ();
  };
  var $S08 = function () {
    return ($S08 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.ArgumentNullException"), [$asm07.TypeRef("System.String")]))) ();
  };
  var $S09 = function () {
    return ($S09 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm05.TypeRef("Fusee.Serialization.MeshComponent"), $asm02.TypeRef("Fusee.Engine.Mesh")]), null))) ();
  };
  var $S0A = function () {
    return ($S0A = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm05.TypeRef("Fusee.Serialization.MaterialComponent"), $asm02.TypeRef("Fusee.Engine.ShaderEffect")]), null))) ();
  };

  function SceneRenderer__ctor (sc, scenePathDirectory) {
    $T02().prototype._ctor.call(this);
    this._lights = $S00().Construct();
    this._sc = sc;
    this._scenePathDirectory = scenePathDirectory;
    this._state = new ($T04())();
  };

  function SceneRenderer_AssembleEffectParamers (mc, scb) {
    var list = $S01().Construct();
    if (mc.get_HasDiffuse()) {
      var item = new ($T08())();
      item.Name = scb.get_DiffuseColorName();
      item.Value = mc.Diffuse.Color.MemberwiseClone();
      $S02().CallVirtual("Add", null, list, item.MemberwiseClone());
      if (mc.Diffuse.Texture !== null) {
        var item2 = new ($T08())();
        item2.Name = scb.get_DiffuseMixName();
        item2.Value = mc.Diffuse.Mix;
        $S02().CallVirtual("Add", null, list, item2.MemberwiseClone());
        var item3 = new ($T08())();
        item3.Name = scb.get_DiffuseTextureName();
        item3.Value = this.LoadTexture(mc.Diffuse.Texture);
        $S02().CallVirtual("Add", null, list, item3.MemberwiseClone());
      }
    }
    if (mc.get_HasSpecular()) {
      var item4 = new ($T08())();
      item4.Name = scb.get_SpecularColorName();
      item4.Value = mc.Specular.Color.MemberwiseClone();
      $S02().CallVirtual("Add", null, list, item4.MemberwiseClone());
      var item5 = new ($T08())();
      item5.Name = scb.get_SpecularShininessName();
      item5.Value = mc.Specular.Shininess;
      $S02().CallVirtual("Add", null, list, item5.MemberwiseClone());
      var item6 = new ($T08())();
      item6.Name = scb.get_SpecularIntensityName();
      item6.Value = mc.Specular.Intensity;
      $S02().CallVirtual("Add", null, list, item6.MemberwiseClone());
      if (mc.Specular.Texture !== null) {
        var item7 = new ($T08())();
        item7.Name = scb.get_SpecularMixName();
        item7.Value = mc.Specular.Mix;
        $S02().CallVirtual("Add", null, list, item7.MemberwiseClone());
        var item8 = new ($T08())();
        item8.Name = scb.get_SpecularTextureName();
        item8.Value = this.LoadTexture(mc.Specular.Texture);
        $S02().CallVirtual("Add", null, list, item8.MemberwiseClone());
      }
    }
    if (mc.get_HasEmissive()) {
      var item9 = new ($T08())();
      item9.Name = scb.get_EmissiveColorName();
      item9.Value = mc.Emissive.Color.MemberwiseClone();
      $S02().CallVirtual("Add", null, list, item9.MemberwiseClone());
      if (mc.Emissive.Texture !== null) {
        var item10 = new ($T08())();
        item10.Name = scb.get_EmissiveMixName();
        item10.Value = mc.Emissive.Mix;
        $S02().CallVirtual("Add", null, list, item10.MemberwiseClone());
        var item11 = new ($T08())();
        item11.Name = scb.get_EmissiveTextureName();
        item11.Value = this.LoadTexture(mc.Emissive.Texture);
        $S02().CallVirtual("Add", null, list, item11.MemberwiseClone());
      }
    }
    if (mc.get_HasBump()) {
      var item12 = new ($T08())();
      item12.Name = scb.get_BumpIntensityName();
      item12.Value = mc.Bump.Intensity;
      $S02().CallVirtual("Add", null, list, item12.MemberwiseClone());
      var item13 = new ($T08())();
      item13.Name = scb.get_BumpTextureName();
      item13.Value = this.LoadTexture(mc.Bump.Texture);
      $S02().CallVirtual("Add", null, list, item13.MemberwiseClone());
    }
    if (!(!mc.get_HasDiffuse() && !mc.get_HasSpecular())) {
      var item14 = new ($T08())();
      item14.Name = $T06().get_LightColorName();
      item14.Value = $S03().Construct(1, 1, 1);
      $S02().CallVirtual("Add", null, list, item14.MemberwiseClone());
      var item15 = new ($T08())();
      item15.Name = $T06().get_LightIntensityName();
      item15.Value = 1;
      $S02().CallVirtual("Add", null, list, item15.MemberwiseClone());
      var item16 = new ($T08())();
      item16.Name = $T06().get_LightDirectionName();
      item16.Value = $S03().Construct(0, 0, 1);
      $S02().CallVirtual("Add", null, list, item16.MemberwiseClone());
    }
    return list;
  };

  function SceneRenderer_InitState () {
    (this._state).Clear();
    (this._state.Model = $T0B().Identity.MemberwiseClone());
    this._view = (this._rc).get_ModelView().MemberwiseClone();
    (this._state).set_Effect(this._defaultEffect);
  };

  function SceneRenderer_LoadTexture (path) {
    var filename = $T0D().Combine(this._scenePathDirectory, path);
    var imgData = (this._rc).LoadImage(filename).MemberwiseClone();
    return (this._rc).CreateTexture(imgData.MemberwiseClone(), false);
  };

  function SceneRenderer_LookupMaterial (mc) {
    var shaderEffect = new JSIL.BoxedVariable(null);
    if (!(this._matMap).TryGetValue(mc, /* ref */ shaderEffect)) {
      shaderEffect.set(this.MakeMaterial(mc));
      (shaderEffect.get()).AttachToContext(this._rc);
      (this._matMap).Add(mc, shaderEffect.get());
    }
    return shaderEffect.get();
  };

  function SceneRenderer_MakeMaterial (mc) {
    var shaderCodeBuilder = new ($T06())(mc, null);
    var effectParameters = this.AssembleEffectParamers(mc, shaderCodeBuilder);
    var array = JSIL.Array.New($T12(), 1);
    var arg_67_0_cp_0 = array;
    var effectPassDeclaration = new ($T12())();
    effectPassDeclaration.VS = shaderCodeBuilder.get_VS();
    effectPassDeclaration.PS = shaderCodeBuilder.get_PS();
    var renderStateSet = new ($T13())();
    renderStateSet.set_ZEnable(true);
    renderStateSet.set_AlphaBlendEnable(false);
    effectPassDeclaration.StateSet = renderStateSet;
    arg_67_0_cp_0[0] = effectPassDeclaration;
    return new ($T0F())(array, effectParameters);
  };

  function SceneRenderer_MakeMesh (mc) {
    var mesh = new ($T15())();
    mesh.set_Colors(null);
    mesh.set_Normals(mc.Normals);
    mesh.set_UVs(mc.UVs);
    mesh.set_Vertices(mc.Vertices);
    mesh.set_Triangles(mc.Triangles);
    return mesh;
  };

  function SceneRenderer_PopState () {
    (this._state).Pop();
    (this._rc.ModelView = $S04().CallStatic($T0B(), "op_Multiply", null, this._view.MemberwiseClone(), (this._state).get_Model().MemberwiseClone()).MemberwiseClone());
  };

  function SceneRenderer_PushState () {
    (this._state).Push();
  };

  function SceneRenderer_Render (rc) {
    this.SetContext(rc);
    $S05().CallVirtual("Traverse", null, this, this._sc.Children);
  };

  function SceneRenderer_RenderMaterial (matComp) {
    var effect = this.LookupMaterial(matComp);
    (this._state).set_Effect(effect);
  };

  function SceneRenderer_RenderMesh (meshComponent) {
    var mesh = new JSIL.BoxedVariable(null);
    if (!(this._meshMap).TryGetValue(meshComponent, /* ref */ mesh)) {
      mesh.set($thisType.MakeMesh(meshComponent));
      (this._meshMap).Add(meshComponent, mesh.get());
    }
    if (null !== ((this._state).get_Effect()).GetEffectParam($T06().get_LightDirectionName())) {
      this.RenderWithLights(mesh.get(), (this._state).get_Effect());
    } else {
      ((this._state).get_Effect()).RenderMesh(mesh.get());
    }
  };

  function SceneRenderer_RenderTransform (transform) {
    this._state.Model = $S04().CallStatic($T0B(), "op_Multiply", null, this._state.Model.MemberwiseClone(), $T18().Matrix(transform).MemberwiseClone()).MemberwiseClone();
    (this._rc.Model = $S04().CallStatic($T0B(), "op_Multiply", null, this._view.MemberwiseClone(), (this._state).get_Model().MemberwiseClone()).MemberwiseClone());
  };

  function SceneRenderer_RenderWithLights (rm, effect) {
    var $temp00;
    if (((this._lights).get_Count() | 0) > 0) {

      for (var a$0 = this._lights._items, i$0 = 0, l$0 = (this._lights._size | 0); i$0 < l$0; ($temp00 = i$0, 
          i$0 = ((i$0 + 1) | 0), 
          $temp00)) {
        var current = a$0[i$0];
        effect.RenderMesh(rm);
      }
    } else {
      effect.SetEffectParam($T06().get_LightColorName(), $S03().Construct(1, 1, 1));
      var xyz = ($S06().CallStatic($T0B(), "op_Multiply", null, (this._rc).get_InvModelView(), $S07().Construct(0, 0, -1, 0))).get_xyz().MemberwiseClone();
      xyz.Normalize();
      effect.SetEffectParam($T06().get_LightDirectionName(), xyz.MemberwiseClone());
      effect.SetEffectParam($T06().get_LightIntensityName(), 1);
      effect.RenderMesh(rm);
    }
  };

  function SceneRenderer_SetContext (rc) {
    if (rc === null) {
      throw $S08().Construct("rc");
    }
    if (rc !== this._rc) {
      this._rc = rc;
      this._meshMap = $S09().Construct();
      this._matMap = $S0A().Construct();
      var materialComponent = new ($T05())();
      var arg_6F_0 = materialComponent;
      var matChannelContainer = new ($T1C())();
      matChannelContainer.Color = $S03().Construct(0.5, 0.5, 0.5);
      arg_6F_0.Diffuse = matChannelContainer;
      var arg_AC_0 = materialComponent;
      var specularChannelContainer = new ($T1D())();
      specularChannelContainer.Color = $S03().Construct(1, 1, 1);
      specularChannelContainer.Intensity = 0.5;
      specularChannelContainer.Shininess = 22;
      arg_AC_0.Specular = specularChannelContainer;
      this._defaultEffect = this.MakeMaterial(materialComponent);
      (this._defaultEffect).AttachToContext(this._rc);
    }
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitor"), 
      Name: "Fusee.Engine.SimpleScene.SceneRenderer", 
      IsPublic: true, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 2, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      new JSIL.MethodSignature(null, [$asm05.TypeRef("Fusee.Serialization.SceneContainer"), $.String]), 
      SceneRenderer__ctor
    );

    $.Method({Static:false, Public:false}, "AssembleEffectParamers", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.List`1", [$asm02.TypeRef("Fusee.Engine.EffectParameterDeclaration")]), [$asm05.TypeRef("Fusee.Serialization.MaterialComponent"), $asm03.TypeRef("Fusee.Engine.SimpleScene.ShaderCodeBuilder")]), 
      SceneRenderer_AssembleEffectParamers
    );

    $.Method({Static:false, Public:false, Virtual:true }, "InitState", 
      JSIL.MethodSignature.Void, 
      SceneRenderer_InitState
    );

    $.Method({Static:false, Public:false}, "LoadTexture", 
      new JSIL.MethodSignature($asm01.TypeRef("Fusee.Engine.ITexture"), [$.String]), 
      SceneRenderer_LoadTexture
    );

    $.Method({Static:false, Public:false}, "LookupMaterial", 
      new JSIL.MethodSignature($asm02.TypeRef("Fusee.Engine.ShaderEffect"), [$asm05.TypeRef("Fusee.Serialization.MaterialComponent")]), 
      SceneRenderer_LookupMaterial
    );

    $.Method({Static:false, Public:false}, "MakeMaterial", 
      new JSIL.MethodSignature($asm02.TypeRef("Fusee.Engine.ShaderEffect"), [$asm05.TypeRef("Fusee.Serialization.MaterialComponent")]), 
      SceneRenderer_MakeMaterial
    );

    $.Method({Static:true , Public:true }, "MakeMesh", 
      new JSIL.MethodSignature($asm02.TypeRef("Fusee.Engine.Mesh"), [$asm05.TypeRef("Fusee.Serialization.MeshComponent")]), 
      SceneRenderer_MakeMesh
    );

    $.Method({Static:false, Public:false, Virtual:true }, "PopState", 
      JSIL.MethodSignature.Void, 
      SceneRenderer_PopState
    );

    $.Method({Static:false, Public:false, Virtual:true }, "PushState", 
      JSIL.MethodSignature.Void, 
      SceneRenderer_PushState
    );

    $.Method({Static:false, Public:true }, "Render", 
      JSIL.MethodSignature.Action($asm02.TypeRef("Fusee.Engine.RenderContext")), 
      SceneRenderer_Render
    );

    $.Method({Static:false, Public:true }, "RenderMaterial", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.MaterialComponent")), 
      SceneRenderer_RenderMaterial
    )
      .Attribute($asm03.TypeRef("Fusee.Engine.SimpleScene.VisitMethodAttribute"));

    $.Method({Static:false, Public:true }, "RenderMesh", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.MeshComponent")), 
      SceneRenderer_RenderMesh
    )
      .Attribute($asm03.TypeRef("Fusee.Engine.SimpleScene.VisitMethodAttribute"));

    $.Method({Static:false, Public:true }, "RenderTransform", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.TransformComponent")), 
      SceneRenderer_RenderTransform
    )
      .Attribute($asm03.TypeRef("Fusee.Engine.SimpleScene.VisitMethodAttribute"));

    $.Method({Static:false, Public:false}, "RenderWithLights", 
      new JSIL.MethodSignature(null, [$asm02.TypeRef("Fusee.Engine.Mesh"), $asm02.TypeRef("Fusee.Engine.ShaderEffect")]), 
      SceneRenderer_RenderWithLights
    );

    $.Method({Static:false, Public:true }, "SetContext", 
      JSIL.MethodSignature.Action($asm02.TypeRef("Fusee.Engine.RenderContext")), 
      SceneRenderer_SetContext
    );

    $.Field({Static:false, Public:false}, "_meshMap", $asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm05.TypeRef("Fusee.Serialization.MeshComponent"), $asm02.TypeRef("Fusee.Engine.Mesh")])); 
    $.Field({Static:false, Public:false}, "_matMap", $asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm05.TypeRef("Fusee.Serialization.MaterialComponent"), $asm02.TypeRef("Fusee.Engine.ShaderEffect")])); 
    $.Field({Static:false, Public:false}, "_sc", $asm05.TypeRef("Fusee.Serialization.SceneContainer")); 
    $.Field({Static:false, Public:false}, "_rc", $asm02.TypeRef("Fusee.Engine.RenderContext")); 
    $.Field({Static:false, Public:false}, "_lights", $asm07.TypeRef("System.Collections.Generic.List`1", [$asm03.TypeRef("Fusee.Engine.SimpleScene.LightInfo")])); 
    $.Field({Static:false, Public:false}, "_scenePathDirectory", $.String); 
    $.Field({Static:false, Public:false}, "_defaultEffect", $asm02.TypeRef("Fusee.Engine.ShaderEffect")); 
    $.Field({Static:false, Public:false}, "_state", $asm03.TypeRef("Fusee.Engine.SimpleScene.SceneRenderer+RendererState")); 
    $.Field({Static:false, Public:false}, "_view", $asm04.TypeRef("Fusee.Math.float4x4")); 
    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.SceneRenderer+RendererState */ 

(function RendererState$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.CollapsingStateStack$b1.Of($asm04.Fusee.Math.float4x4))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.StateStack$b1.Of($asm02.Fusee.Engine.ShaderEffect))) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.VisitorState)) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm02.Fusee.Engine.ShaderEffect)) ();
  };
  var $T04 = function () {
    return ($T04 = JSIL.Memoize($asm04.Fusee.Math.float4x4)) ();
  };

  function RendererState__ctor () {
    this._model = new ($T00())(4);
    this._effect = new ($T01())(8);
    $T02().prototype._ctor.call(this);
    this.RegisterState(this._model);
    this.RegisterState(this._effect);
  };

  function RendererState_get_Effect () {
    return (this._effect).get_Tos();
  };

  function RendererState_get_Model () {
    return (this._model).get_Tos();
  };

  function RendererState_set_Effect (value) {
    (this._effect).set_Tos(value);
  };

  function RendererState_set_Model (value) {
    (this._model).set_Tos(value.MemberwiseClone());
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.VisitorState"), 
      Name: "Fusee.Engine.SimpleScene.SceneRenderer+RendererState", 
      IsPublic: false, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      RendererState__ctor
    );

    $.Method({Static:false, Public:true }, "get_Effect", 
      JSIL.MethodSignature.Return($asm02.TypeRef("Fusee.Engine.ShaderEffect")), 
      RendererState_get_Effect
    );

    $.Method({Static:false, Public:true }, "get_Model", 
      JSIL.MethodSignature.Return($asm04.TypeRef("Fusee.Math.float4x4")), 
      RendererState_get_Model
    );

    $.Method({Static:false, Public:true }, "set_Effect", 
      JSIL.MethodSignature.Action($asm02.TypeRef("Fusee.Engine.ShaderEffect")), 
      RendererState_set_Effect
    );

    $.Method({Static:false, Public:true }, "set_Model", 
      JSIL.MethodSignature.Action($asm04.TypeRef("Fusee.Math.float4x4")), 
      RendererState_set_Model
    );

    $.Field({Static:false, Public:false}, "_model", $asm03.TypeRef("Fusee.Engine.SimpleScene.CollapsingStateStack`1", [$asm04.TypeRef("Fusee.Math.float4x4")])); 
    $.Field({Static:false, Public:false}, "_effect", $asm03.TypeRef("Fusee.Engine.SimpleScene.StateStack`1", [$asm02.TypeRef("Fusee.Engine.ShaderEffect")])); 
    $.Property({Static:false, Public:true }, "Model", $asm04.TypeRef("Fusee.Math.float4x4"));

    $.Property({Static:false, Public:true }, "Effect", $asm02.TypeRef("Fusee.Engine.ShaderEffect"));

    $.ImplementInterfaces(
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.SceneRendererOld */ 

(function SceneRendererOld$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm05.Fusee.Serialization.SceneContainer)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm07.System.String)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm02.Fusee.Engine.RenderStateSet)) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm01.Fusee.Engine.Blend)) ();
  };
  var $T04 = function () {
    return ($T04 = JSIL.Memoize($asm01.Fusee.Engine.Compare)) ();
  };
  var $T05 = function () {
    return ($T05 = JSIL.Memoize($asm07.System.Collections.Generic.List$b1.Of($asm03.Fusee.Engine.SimpleScene.LightInfo))) ();
  };
  var $T06 = function () {
    return ($T06 = JSIL.Memoize($asm05.Fusee.Serialization.MaterialComponent)) ();
  };
  var $T07 = function () {
    return ($T07 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.ShaderCodeBuilder)) ();
  };
  var $T08 = function () {
    return ($T08 = JSIL.Memoize($asm07.System.Collections.Generic.List$b1.Of($asm02.Fusee.Engine.EffectParameterDeclaration))) ();
  };
  var $T09 = function () {
    return ($T09 = JSIL.Memoize($asm02.Fusee.Engine.EffectParameterDeclaration)) ();
  };
  var $T0A = function () {
    return ($T0A = JSIL.Memoize($asm04.Fusee.Math.float3)) ();
  };
  var $T0B = function () {
    return ($T0B = JSIL.Memoize($asm04.Fusee.Math.float4x4)) ();
  };
  var $T0C = function () {
    return ($T0C = JSIL.Memoize($asm05.Fusee.Serialization.SceneNodeContainer)) ();
  };
  var $T0D = function () {
    return ($T0D = JSIL.Memoize($asm04.Fusee.Math.AABBf)) ();
  };
  var $T0E = function () {
    return ($T0E = JSIL.Memoize($asm02.Fusee.Engine.RenderContext)) ();
  };
  var $T0F = function () {
    return ($T0F = JSIL.Memoize($asm07.System.Collections.Generic.Dictionary$b2.Of($asm05.Fusee.Serialization.MeshComponent, $asm02.Fusee.Engine.Mesh))) ();
  };
  var $T10 = function () {
    return ($T10 = JSIL.Memoize($asm07.System.Collections.Generic.Dictionary$b2.Of($asm05.Fusee.Serialization.MaterialComponent, $asm02.Fusee.Engine.ShaderEffect))) ();
  };
  var $T11 = function () {
    return ($T11 = JSIL.Memoize($asm05.Fusee.Serialization.MatChannelContainer)) ();
  };
  var $T12 = function () {
    return ($T12 = JSIL.Memoize($asm05.Fusee.Serialization.SpecularChannelContainer)) ();
  };
  var $T13 = function () {
    return ($T13 = JSIL.Memoize($asm02.Fusee.Engine.ShaderEffect)) ();
  };
  var $T14 = function () {
    return ($T14 = JSIL.Memoize($asm07.System.IO.Path)) ();
  };
  var $T15 = function () {
    return ($T15 = JSIL.Memoize($asm01.Fusee.Engine.ImageData)) ();
  };
  var $T16 = function () {
    return ($T16 = JSIL.Memoize(System.Array.Of($asm02.Fusee.Engine.EffectPassDeclaration))) ();
  };
  var $T17 = function () {
    return ($T17 = JSIL.Memoize($asm02.Fusee.Engine.EffectPassDeclaration)) ();
  };
  var $T18 = function () {
    return ($T18 = JSIL.Memoize($asm05.Fusee.Serialization.MeshComponent)) ();
  };
  var $T19 = function () {
    return ($T19 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.ContainerExtensions)) ();
  };
  var $T1A = function () {
    return ($T1A = JSIL.Memoize($asm02.Fusee.Engine.Mesh)) ();
  };
  var $T1B = function () {
    return ($T1B = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.LightInfo)) ();
  };
  var $T1C = function () {
    return ($T1C = JSIL.Memoize($asm04.Fusee.Math.float4)) ();
  };
  var $T1D = function () {
    return ($T1D = JSIL.Memoize($asm07.System.NotImplementedException)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.List`1", [$asm03.TypeRef("Fusee.Engine.SimpleScene.LightInfo")]), null))) ();
  };
  var $S01 = function () {
    return ($S01 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.List`1", [$asm02.TypeRef("Fusee.Engine.EffectParameterDeclaration")]), null))) ();
  };
  var $S02 = function () {
    return ($S02 = JSIL.Memoize(new JSIL.MethodSignature(null, [$asm02.TypeRef("Fusee.Engine.EffectParameterDeclaration")]))) ();
  };
  var $S03 = function () {
    return ($S03 = JSIL.Memoize(new JSIL.ConstructorSignature($asm04.TypeRef("Fusee.Math.float3"), [
        $asm07.TypeRef("System.Single"), $asm07.TypeRef("System.Single"), 
        $asm07.TypeRef("System.Single")
      ]))) ();
  };
  var $S04 = function () {
    return ($S04 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm05.TypeRef("Fusee.Serialization.MeshComponent"), $asm02.TypeRef("Fusee.Engine.Mesh")]), null))) ();
  };
  var $S05 = function () {
    return ($S05 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm05.TypeRef("Fusee.Serialization.MaterialComponent"), $asm02.TypeRef("Fusee.Engine.ShaderEffect")]), null))) ();
  };
  var $S06 = function () {
    return ($S06 = JSIL.Memoize(new JSIL.MethodSignature($asm04.TypeRef("Fusee.Math.float4"), [$asm04.TypeRef("Fusee.Math.float4x4"), $asm04.TypeRef("Fusee.Math.float4")]))) ();
  };
  var $S07 = function () {
    return ($S07 = JSIL.Memoize(new JSIL.ConstructorSignature($asm04.TypeRef("Fusee.Math.float4"), [
        $asm07.TypeRef("System.Single"), $asm07.TypeRef("System.Single"), 
        $asm07.TypeRef("System.Single"), $asm07.TypeRef("System.Single")
      ]))) ();
  };
  var $S08 = function () {
    return ($S08 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.NotImplementedException"), [$asm07.TypeRef("System.String")]))) ();
  };

  function SceneRendererOld__ctor (sc, scenePathDirectory) {
    var renderStateSet = new ($T02())();
    renderStateSet.set_AlphaBlendEnable(false);
    renderStateSet.set_SourceBlend($T03().One);
    renderStateSet.set_DestinationBlend($T03().Zero);
    renderStateSet.set_ZEnable(true);
    renderStateSet.set_ZFunc($T04().Less);
    this._stateSet = renderStateSet;
    this._lights = $S00().Construct();
    this._sc = sc;
    this._scenePathDirectory = scenePathDirectory;
  };

  function SceneRendererOld_AssembleEffectParamers (mc, scb) {
    var list = $S01().Construct();
    if (mc.get_HasDiffuse()) {
      var item = new ($T09())();
      item.Name = scb.get_DiffuseColorName();
      item.Value = mc.Diffuse.Color.MemberwiseClone();
      $S02().CallVirtual("Add", null, list, item.MemberwiseClone());
      if (mc.Diffuse.Texture !== null) {
        var item2 = new ($T09())();
        item2.Name = scb.get_DiffuseMixName();
        item2.Value = mc.Diffuse.Mix;
        $S02().CallVirtual("Add", null, list, item2.MemberwiseClone());
        var item3 = new ($T09())();
        item3.Name = scb.get_DiffuseTextureName();
        item3.Value = this.LoadTexture(mc.Diffuse.Texture);
        $S02().CallVirtual("Add", null, list, item3.MemberwiseClone());
      }
    }
    if (mc.get_HasSpecular()) {
      var item4 = new ($T09())();
      item4.Name = scb.get_SpecularColorName();
      item4.Value = mc.Specular.Color.MemberwiseClone();
      $S02().CallVirtual("Add", null, list, item4.MemberwiseClone());
      var item5 = new ($T09())();
      item5.Name = scb.get_SpecularShininessName();
      item5.Value = mc.Specular.Shininess;
      $S02().CallVirtual("Add", null, list, item5.MemberwiseClone());
      var item6 = new ($T09())();
      item6.Name = scb.get_SpecularIntensityName();
      item6.Value = mc.Specular.Intensity;
      $S02().CallVirtual("Add", null, list, item6.MemberwiseClone());
      if (mc.Specular.Texture !== null) {
        var item7 = new ($T09())();
        item7.Name = scb.get_SpecularMixName();
        item7.Value = mc.Specular.Mix;
        $S02().CallVirtual("Add", null, list, item7.MemberwiseClone());
        var item8 = new ($T09())();
        item8.Name = scb.get_SpecularTextureName();
        item8.Value = this.LoadTexture(mc.Specular.Texture);
        $S02().CallVirtual("Add", null, list, item8.MemberwiseClone());
      }
    }
    if (mc.get_HasEmissive()) {
      var item9 = new ($T09())();
      item9.Name = scb.get_EmissiveColorName();
      item9.Value = mc.Emissive.Color.MemberwiseClone();
      $S02().CallVirtual("Add", null, list, item9.MemberwiseClone());
      if (mc.Emissive.Texture !== null) {
        var item10 = new ($T09())();
        item10.Name = scb.get_EmissiveMixName();
        item10.Value = mc.Emissive.Mix;
        $S02().CallVirtual("Add", null, list, item10.MemberwiseClone());
        var item11 = new ($T09())();
        item11.Name = scb.get_EmissiveTextureName();
        item11.Value = this.LoadTexture(mc.Emissive.Texture);
        $S02().CallVirtual("Add", null, list, item11.MemberwiseClone());
      }
    }
    if (mc.get_HasBump()) {
      var item12 = new ($T09())();
      item12.Name = scb.get_BumpIntensityName();
      item12.Value = mc.Bump.Intensity;
      $S02().CallVirtual("Add", null, list, item12.MemberwiseClone());
      var item13 = new ($T09())();
      item13.Name = scb.get_BumpTextureName();
      item13.Value = this.LoadTexture(mc.Bump.Texture);
      $S02().CallVirtual("Add", null, list, item13.MemberwiseClone());
    }
    if (!(!mc.get_HasDiffuse() && !mc.get_HasSpecular())) {
      var item14 = new ($T09())();
      item14.Name = $T07().get_LightColorName();
      item14.Value = $S03().Construct(1, 1, 1);
      $S02().CallVirtual("Add", null, list, item14.MemberwiseClone());
      var item15 = new ($T09())();
      item15.Name = $T07().get_LightIntensityName();
      item15.Value = 1;
      $S02().CallVirtual("Add", null, list, item15.MemberwiseClone());
      var item16 = new ($T09())();
      item16.Name = $T07().get_LightDirectionName();
      item16.Value = $S03().Construct(0, 0, 1);
      $S02().CallVirtual("Add", null, list, item16.MemberwiseClone());
    }
    return list;
  };

  function SceneRendererOld_get_CurMat () {
    return this._curMat;
  };

  function SceneRendererOld_GetAABB () {
    var $temp00;
    var result = null;
    this._AABBXForm = $T0B().Identity.MemberwiseClone();

    for (var a$0 = this._sc.Children._items, i$0 = 0, l$0 = (this._sc.Children._size | 0); i$0 < l$0; ($temp00 = i$0, 
        i$0 = ((i$0 + 1) | 0), 
        $temp00)) {
      var current = a$0[i$0];
      var aABBf = this.VisitNodeAABB(current);
      if (aABBf !== null) {
        if (result === null) {
          result = aABBf;
        } else {
          result = $T0D().Union(JSIL.Nullable_Value(result), JSIL.Nullable_Value(aABBf)).MemberwiseClone();
        }
      }
    }
    return result;
  };

  function SceneRendererOld_InitShaders (rc) {
    if (rc !== this._rc) {
      this._rc = rc;
      this._meshMap = $S04().Construct();
      this._matMap = $S05().Construct();
      this._curMat = null;
    }
    if (this._curMat === null) {
      var materialComponent = new ($T06())();
      var arg_72_0 = materialComponent;
      var matChannelContainer = new ($T11())();
      matChannelContainer.Color = $S03().Construct(0.5, 0.5, 0.5);
      arg_72_0.Diffuse = matChannelContainer;
      var arg_AF_0 = materialComponent;
      var specularChannelContainer = new ($T12())();
      specularChannelContainer.Color = $S03().Construct(1, 1, 1);
      specularChannelContainer.Intensity = 0.5;
      specularChannelContainer.Shininess = 22;
      arg_AF_0.Specular = specularChannelContainer;
      this._curMat = this.MakeMaterial(materialComponent);
      (this.get_CurMat()).AttachToContext(rc);
    }
  };

  function SceneRendererOld_LoadTexture (path) {
    var filename = $T14().Combine(this._scenePathDirectory, path);
    var imgData = (this._rc).LoadImage(filename).MemberwiseClone();
    return (this._rc).CreateTexture(imgData.MemberwiseClone(), false);
  };

  function SceneRendererOld_LookupMaterial (mc) {
    var shaderEffect = new JSIL.BoxedVariable(null);
    if (!(this._matMap).TryGetValue(mc, /* ref */ shaderEffect)) {
      shaderEffect.set(this.MakeMaterial(mc));
      (shaderEffect.get()).AttachToContext(this._rc);
      (this._matMap).Add(mc, shaderEffect.get());
    }
    return shaderEffect.get();
  };

  function SceneRendererOld_MakeMaterial (mc) {
    var shaderCodeBuilder = new ($T07())(mc, null);
    var effectParameters = this.AssembleEffectParamers(mc, shaderCodeBuilder);
    var array = JSIL.Array.New($T17(), 1);
    var arg_67_0_cp_0 = array;
    var effectPassDeclaration = new ($T17())();
    effectPassDeclaration.VS = shaderCodeBuilder.get_VS();
    effectPassDeclaration.PS = shaderCodeBuilder.get_PS();
    var renderStateSet = new ($T02())();
    renderStateSet.set_ZEnable(true);
    renderStateSet.set_AlphaBlendEnable(false);
    effectPassDeclaration.StateSet = renderStateSet;
    arg_67_0_cp_0[0] = effectPassDeclaration;
    return new ($T13())(array, effectParameters);
  };

  function SceneRendererOld_MakeMesh (soc) {
    var mesh = $T19().GetMesh(soc, 0);
    var mesh2 = new ($T1A())();
    mesh2.set_Colors(null);
    mesh2.set_Normals(mesh.Normals);
    mesh2.set_UVs(mesh.UVs);
    mesh2.set_Vertices(mesh.Vertices);
    mesh2.set_Triangles(mesh.Triangles);
    return mesh2;
  };

  function SceneRendererOld_Render (rc) {
    var $temp00;
    this.InitShaders(rc);

    for (var a$0 = this._sc.Children._items, i$0 = 0, l$0 = (this._sc.Children._size | 0); i$0 < l$0; ($temp00 = i$0, 
        i$0 = ((i$0 + 1) | 0), 
        $temp00)) {
      var current = a$0[i$0];
      this.VisitNodeRender(current);
    }
  };

  function SceneRendererOld_RenderWithLights (rm, CurMat) {
    var $temp00;
    if (((this._lights).get_Count() | 0) > 0) {

      for (var a$0 = this._lights._items, i$0 = 0, l$0 = (this._lights._size | 0); i$0 < l$0; ($temp00 = i$0, 
          i$0 = ((i$0 + 1) | 0), 
          $temp00)) {
        var current = a$0[i$0];
        CurMat.RenderMesh(rm);
      }
    } else {
      CurMat.SetEffectParam($T07().get_LightColorName(), $S03().Construct(1, 1, 1));
      var xyz = ($S06().CallStatic($T0B(), "op_Multiply", null, (this._rc).get_InvModelView(), $S07().Construct(0, 0, -1, 0))).get_xyz().MemberwiseClone();
      xyz.Normalize();
      CurMat.SetEffectParam($T07().get_LightDirectionName(), xyz.MemberwiseClone());
      CurMat.SetEffectParam($T07().get_LightIntensityName(), 1);
      CurMat.RenderMesh(rm);
    }
  };

  function SceneRendererOld_set_CurMat (value) {
    this._curMat = value;
  };

  function SceneRendererOld_VisitNodeAABB (node) {
    var aABBXForm = this._AABBXForm;
    throw $S08().Construct("correctly handle transform");
  };

  function SceneRendererOld_VisitNodeRender (node) {
    var modelView = (this._rc).get_ModelView();
    var curMat = this.get_CurMat();
    throw $S08().Construct("correctly handle transform");
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.SceneRendererOld", 
      IsPublic: true, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 2, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      new JSIL.MethodSignature(null, [$asm05.TypeRef("Fusee.Serialization.SceneContainer"), $.String]), 
      SceneRendererOld__ctor
    );

    $.Method({Static:false, Public:false}, "AssembleEffectParamers", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.List`1", [$asm02.TypeRef("Fusee.Engine.EffectParameterDeclaration")]), [$asm05.TypeRef("Fusee.Serialization.MaterialComponent"), $asm03.TypeRef("Fusee.Engine.SimpleScene.ShaderCodeBuilder")]), 
      SceneRendererOld_AssembleEffectParamers
    );

    $.Method({Static:false, Public:false}, "get_CurMat", 
      JSIL.MethodSignature.Return($asm02.TypeRef("Fusee.Engine.ShaderEffect")), 
      SceneRendererOld_get_CurMat
    );

    $.Method({Static:false, Public:true }, "GetAABB", 
      JSIL.MethodSignature.Return($asm07.TypeRef("System.Nullable`1", [$asm04.TypeRef("Fusee.Math.AABBf")])), 
      SceneRendererOld_GetAABB
    );

    $.Method({Static:false, Public:true }, "InitShaders", 
      JSIL.MethodSignature.Action($asm02.TypeRef("Fusee.Engine.RenderContext")), 
      SceneRendererOld_InitShaders
    );

    $.Method({Static:false, Public:false}, "LoadTexture", 
      new JSIL.MethodSignature($asm01.TypeRef("Fusee.Engine.ITexture"), [$.String]), 
      SceneRendererOld_LoadTexture
    );

    $.Method({Static:false, Public:false}, "LookupMaterial", 
      new JSIL.MethodSignature($asm02.TypeRef("Fusee.Engine.ShaderEffect"), [$asm05.TypeRef("Fusee.Serialization.MaterialComponent")]), 
      SceneRendererOld_LookupMaterial
    );

    $.Method({Static:false, Public:false}, "MakeMaterial", 
      new JSIL.MethodSignature($asm02.TypeRef("Fusee.Engine.ShaderEffect"), [$asm05.TypeRef("Fusee.Serialization.MaterialComponent")]), 
      SceneRendererOld_MakeMaterial
    );

    $.Method({Static:true , Public:true }, "MakeMesh", 
      new JSIL.MethodSignature($asm02.TypeRef("Fusee.Engine.Mesh"), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), 
      SceneRendererOld_MakeMesh
    );

    $.Method({Static:false, Public:true }, "Render", 
      JSIL.MethodSignature.Action($asm02.TypeRef("Fusee.Engine.RenderContext")), 
      SceneRendererOld_Render
    );

    $.Method({Static:false, Public:false}, "RenderWithLights", 
      new JSIL.MethodSignature(null, [$asm02.TypeRef("Fusee.Engine.Mesh"), $asm02.TypeRef("Fusee.Engine.ShaderEffect")]), 
      SceneRendererOld_RenderWithLights
    );

    $.Method({Static:false, Public:false}, "set_CurMat", 
      JSIL.MethodSignature.Action($asm02.TypeRef("Fusee.Engine.ShaderEffect")), 
      SceneRendererOld_set_CurMat
    );

    $.Method({Static:false, Public:false}, "VisitNodeAABB", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Nullable`1", [$asm04.TypeRef("Fusee.Math.AABBf")]), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), 
      SceneRendererOld_VisitNodeAABB
    );

    $.Method({Static:false, Public:false}, "VisitNodeRender", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")), 
      SceneRendererOld_VisitNodeRender
    );

    $.Field({Static:false, Public:false}, "_meshMap", $asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm05.TypeRef("Fusee.Serialization.MeshComponent"), $asm02.TypeRef("Fusee.Engine.Mesh")])); 
    $.Field({Static:false, Public:false}, "_matMap", $asm07.TypeRef("System.Collections.Generic.Dictionary`2", [$asm05.TypeRef("Fusee.Serialization.MaterialComponent"), $asm02.TypeRef("Fusee.Engine.ShaderEffect")])); 
    $.Field({Static:false, Public:false}, "_sc", $asm05.TypeRef("Fusee.Serialization.SceneContainer")); 
    $.Field({Static:false, Public:false}, "_rc", $asm02.TypeRef("Fusee.Engine.RenderContext")); 
    $.Field({Static:false, Public:false}, "_AABBXForm", $asm04.TypeRef("Fusee.Math.float4x4")); 
    $.Field({Static:false, Public:false}, "_lights", $asm07.TypeRef("System.Collections.Generic.List`1", [$asm03.TypeRef("Fusee.Engine.SimpleScene.LightInfo")])); 
    $.Field({Static:false, Public:false}, "_stateSet", $asm02.TypeRef("Fusee.Engine.RenderStateSet")); 
    $.Field({Static:false, Public:false}, "_curMat", $asm02.TypeRef("Fusee.Engine.ShaderEffect")); 
    $.Field({Static:false, Public:false}, "_scenePathDirectory", $.String); 
    $.Property({Static:false, Public:false}, "CurMat", $asm02.TypeRef("Fusee.Engine.ShaderEffect"));

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.VisitMethodAttribute */ 

(function VisitMethodAttribute$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Attribute)) ();
  };

  function VisitMethodAttribute__ctor () {
    $T00().prototype._ctor.call(this);
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Attribute"), 
      Name: "Fusee.Engine.SimpleScene.VisitMethodAttribute", 
      IsPublic: true, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      VisitMethodAttribute__ctor
    );

    $.ImplementInterfaces(
    );

    return function (newThisType) { $thisType = newThisType; }; 
  })
    .Attribute($asm07.TypeRef("System.AttributeUsageAttribute"), function () { return [$asm07.System.AttributeTargets.Method]; });

})();

/* class Fusee.Engine.SimpleScene.SceneVisitorHelpers */ 

(function SceneVisitorHelpers$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm05.Fusee.Serialization.SceneNodeContainer)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitorHelpers_$lSingleRootEnum$gd__0)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitorHelpers_$lSingleRootEnumerable$gd__2)) ();
  };

  function SceneVisitorHelpers_SingleRootEnum (root) {
    var $lSingleRootEnum$gd__ = new ($T01())(0);
    $lSingleRootEnum$gd__.root = root;
    return $lSingleRootEnum$gd__;
  };

  function SceneVisitorHelpers_SingleRootEnumerable (root) {
    var $lSingleRootEnumerable$gd__ = new ($T02())(-2);
    $lSingleRootEnumerable$gd__.$l$g3__root = root;
    return $lSingleRootEnumerable$gd__;
  };

  JSIL.MakeStaticClass("Fusee.Engine.SimpleScene.SceneVisitorHelpers", false, [], function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:true , Public:false}, "SingleRootEnum", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), 
      SceneVisitorHelpers_SingleRootEnum
    );

    $.Method({Static:true , Public:false}, "SingleRootEnumerable", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), 
      SceneVisitorHelpers_SingleRootEnumerable
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* delegate Fusee.Engine.SimpleScene.SceneVisitorHelpers+VisitNodeMethod */ 

JSIL.MakeDelegate("Fusee.Engine.SimpleScene.SceneVisitorHelpers+VisitNodeMethod", false, [], 
  new JSIL.MethodSignature(null, [$asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitor"), $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]));

/* delegate Fusee.Engine.SimpleScene.SceneVisitorHelpers+VisitComponentMethod */ 

JSIL.MakeDelegate("Fusee.Engine.SimpleScene.SceneVisitorHelpers+VisitComponentMethod", false, [], 
  new JSIL.MethodSignature(null, [$asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitor"), $asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")]));

/* class Fusee.Engine.SimpleScene.SceneVisitorHelpers+<SingleRootEnum>d__0 */ 

(function $lSingleRootEnum$gd__0$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Int32)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm07.System.Boolean)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm07.System.NotSupportedException)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.NotSupportedException"), null))) ();
  };

  function $lSingleRootEnum$gd__0__ctor ($l$g1__state) {
    this.$l$g1__state = ($l$g1__state | 0);
  };

  function $lSingleRootEnum$gd__0_MoveNext () {
    switch (this.$l$g1__state) {
      case 0: 
        this.$l$g1__state = -1;
        this.$l$g2__current = this.root;
        this.$l$g1__state = 1;
        var result = true;
        return result;

      case 1: 
        this.$l$g1__state = -1;
        break;

    }
    result = false;
    return result;
  };

  function $lSingleRootEnum$gd__0_System_Collections_Generic_IEnumerator$lFusee_Serialization_SceneNodeContainer$g_get_Current () {
    return this.$l$g2__current;
  };

  function $lSingleRootEnum$gd__0_System_Collections_IEnumerator_get_Current () {
    return this.$l$g2__current;
  };

  function $lSingleRootEnum$gd__0_System_Collections_IEnumerator_Reset () {
    throw $S00().Construct();
  };

  function $lSingleRootEnum$gd__0_System_IDisposable_Dispose () {
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.SceneVisitorHelpers+<SingleRootEnum>d__0", 
      IsPublic: false, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 1, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Action($.Int32), 
      $lSingleRootEnum$gd__0__ctor
    )
      .Attribute($asm07.TypeRef("System.Diagnostics.DebuggerHiddenAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "MoveNext", 
      JSIL.MethodSignature.Return($.Boolean), 
      $lSingleRootEnum$gd__0_MoveNext
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerator"), "MoveNext");

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.Generic.IEnumerator$lFusee.Serialization.SceneNodeContainer$g.get_Current", 
      JSIL.MethodSignature.Return($asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")), 
      $lSingleRootEnum$gd__0_System_Collections_Generic_IEnumerator$lFusee_Serialization_SceneNodeContainer$g_get_Current
    )
      .Overrides($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), "get_Current")
      .Attribute($asm07.TypeRef("System.Diagnostics.DebuggerHiddenAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.get_Current", 
      JSIL.MethodSignature.Return($.Object), 
      $lSingleRootEnum$gd__0_System_Collections_IEnumerator_get_Current
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerator"), "get_Current")
      .Attribute($asm07.TypeRef("System.Diagnostics.DebuggerHiddenAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.Reset", 
      JSIL.MethodSignature.Void, 
      $lSingleRootEnum$gd__0_System_Collections_IEnumerator_Reset
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerator"), "Reset")
      .Attribute($asm07.TypeRef("System.Diagnostics.DebuggerHiddenAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "System.IDisposable.Dispose", 
      JSIL.MethodSignature.Void, 
      $lSingleRootEnum$gd__0_System_IDisposable_Dispose
    )
      .Overrides($asm07.TypeRef("System.IDisposable"), "Dispose");

    $.Field({Static:false, Public:false}, "$l$g2__current", $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")); 
    $.Field({Static:false, Public:false}, "$l$g1__state", $.Int32); 
    $.Field({Static:false, Public:true }, "root", $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")); 
    $.Property({Static:false, Public:false, Virtual:true }, "System.Collections.Generic.IEnumerator$lFusee.Serialization.SceneNodeContainer$g.Current", $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"));

    $.Property({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.Current", $.Object);

    $.ImplementInterfaces(
      /* 0 */ $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), 
      /* 1 */ $asm07.TypeRef("System.Collections.IEnumerator"), 
      /* 2 */ $asm07.TypeRef("System.IDisposable")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  })
    .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

})();

/* class Fusee.Engine.SimpleScene.SceneVisitorHelpers+<SingleRootEnumerable>d__2 */ 

(function $lSingleRootEnumerable$gd__2$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Int32)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm07.System.Threading.Thread)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm07.System.Boolean)) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm07.System.NotSupportedException)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.NotSupportedException"), null))) ();
  };

  function $lSingleRootEnumerable$gd__2__ctor ($l$g1__state) {
    this.$l$g1__state = ($l$g1__state | 0);
    this.$l$gl__initialThreadId = ($T01().get_CurrentThread().get_ManagedThreadId() | 0);
  };

  function $lSingleRootEnumerable$gd__2_MoveNext () {
    switch (this.$l$g1__state) {
      case 0: 
        this.$l$g1__state = -1;
        this.$l$g2__current = this.root;
        this.$l$g1__state = 1;
        var result = true;
        return result;

      case 1: 
        this.$l$g1__state = -1;
        break;

    }
    result = false;
    return result;
  };

  function $lSingleRootEnumerable$gd__2_System_Collections_Generic_IEnumerable$lFusee_Serialization_SceneNodeContainer$g_GetEnumerator () {
    if (!((($T01().get_CurrentThread().get_ManagedThreadId() | 0) !== (this.$l$gl__initialThreadId | 0)) || ((this.$l$g1__state | 0) !== -2))) {
      this.$l$g1__state = 0;
      var $lSingleRootEnumerable$gd__ = this;
    } else {
      $lSingleRootEnumerable$gd__ = new $thisType(0);
    }
    $lSingleRootEnumerable$gd__.root = this.$l$g3__root;
    return $lSingleRootEnumerable$gd__;
  };

  function $lSingleRootEnumerable$gd__2_System_Collections_Generic_IEnumerator$lFusee_Serialization_SceneNodeContainer$g_get_Current () {
    return this.$l$g2__current;
  };

  function $lSingleRootEnumerable$gd__2_System_Collections_IEnumerable_GetEnumerator () {
    return this.System_Collections_Generic_IEnumerable$lFusee_Serialization_SceneNodeContainer$g_GetEnumerator();
  };

  function $lSingleRootEnumerable$gd__2_System_Collections_IEnumerator_get_Current () {
    return this.$l$g2__current;
  };

  function $lSingleRootEnumerable$gd__2_System_Collections_IEnumerator_Reset () {
    throw $S00().Construct();
  };

  function $lSingleRootEnumerable$gd__2_System_IDisposable_Dispose () {
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.SceneVisitorHelpers+<SingleRootEnumerable>d__2", 
      IsPublic: false, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 1, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Action($.Int32), 
      $lSingleRootEnumerable$gd__2__ctor
    )
      .Attribute($asm07.TypeRef("System.Diagnostics.DebuggerHiddenAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "MoveNext", 
      JSIL.MethodSignature.Return($.Boolean), 
      $lSingleRootEnumerable$gd__2_MoveNext
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerator"), "MoveNext");

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.Generic.IEnumerable$lFusee.Serialization.SceneNodeContainer$g.GetEnumerator", 
      JSIL.MethodSignature.Return($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])), 
      $lSingleRootEnumerable$gd__2_System_Collections_Generic_IEnumerable$lFusee_Serialization_SceneNodeContainer$g_GetEnumerator
    )
      .Overrides($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), "GetEnumerator")
      .Attribute($asm07.TypeRef("System.Diagnostics.DebuggerHiddenAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.Generic.IEnumerator$lFusee.Serialization.SceneNodeContainer$g.get_Current", 
      JSIL.MethodSignature.Return($asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")), 
      $lSingleRootEnumerable$gd__2_System_Collections_Generic_IEnumerator$lFusee_Serialization_SceneNodeContainer$g_get_Current
    )
      .Overrides($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), "get_Current")
      .Attribute($asm07.TypeRef("System.Diagnostics.DebuggerHiddenAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerable.GetEnumerator", 
      JSIL.MethodSignature.Return($asm07.TypeRef("System.Collections.IEnumerator")), 
      $lSingleRootEnumerable$gd__2_System_Collections_IEnumerable_GetEnumerator
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerable"), "GetEnumerator")
      .Attribute($asm07.TypeRef("System.Diagnostics.DebuggerHiddenAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.get_Current", 
      JSIL.MethodSignature.Return($.Object), 
      $lSingleRootEnumerable$gd__2_System_Collections_IEnumerator_get_Current
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerator"), "get_Current")
      .Attribute($asm07.TypeRef("System.Diagnostics.DebuggerHiddenAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.Reset", 
      JSIL.MethodSignature.Void, 
      $lSingleRootEnumerable$gd__2_System_Collections_IEnumerator_Reset
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerator"), "Reset")
      .Attribute($asm07.TypeRef("System.Diagnostics.DebuggerHiddenAttribute"));

    $.Method({Static:false, Public:false, Virtual:true }, "System.IDisposable.Dispose", 
      JSIL.MethodSignature.Void, 
      $lSingleRootEnumerable$gd__2_System_IDisposable_Dispose
    )
      .Overrides($asm07.TypeRef("System.IDisposable"), "Dispose");

    $.Field({Static:false, Public:false}, "$l$g2__current", $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")); 
    $.Field({Static:false, Public:false}, "$l$g1__state", $.Int32); 
    $.Field({Static:false, Public:false}, "$l$gl__initialThreadId", $.Int32); 
    $.Field({Static:false, Public:true }, "root", $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")); 
    $.Field({Static:false, Public:true }, "$l$g3__root", $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")); 
    $.Property({Static:false, Public:false, Virtual:true }, "System.Collections.Generic.IEnumerator$lFusee.Serialization.SceneNodeContainer$g.Current", $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer"));

    $.Property({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerator.Current", $.Object);

    $.ImplementInterfaces(
      /* 0 */ $asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), 
      /* 1 */ $asm07.TypeRef("System.Collections.IEnumerable"), 
      /* 2 */ $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), 
      /* 3 */ $asm07.TypeRef("System.Collections.IEnumerator"), 
      /* 4 */ $asm07.TypeRef("System.IDisposable")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  })
    .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

})();

/* class Fusee.Engine.SimpleScene.VisitorCallerFactory */ 

(function VisitorCallerFactory$Members () {
  var $, $thisType;
  function VisitorCallerFactory__ctor () {
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.VisitorCallerFactory", 
      IsPublic: false, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      VisitorCallerFactory__ctor
    );

    $.ExternalMethod({Static:true , Public:true }, "MakeComponentVisitor", 
      new JSIL.MethodSignature($asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitorHelpers+VisitComponentMethod"), [$asm07.TypeRef("System.Reflection.MethodInfo")])
    )
      .Attribute($asm10.TypeRef("JSIL.Meta.JSExternal"));

    $.ExternalMethod({Static:true , Public:true }, "MakeNodeVistor", 
      new JSIL.MethodSignature($asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitorHelpers+VisitNodeMethod"), [$asm07.TypeRef("System.Reflection.MethodInfo")])
    )
      .Attribute($asm10.TypeRef("JSIL.Meta.JSExternal"));

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.VisitorCallerFactory+<>c__DisplayClass1 */ 

(function $l$gc__DisplayClass1$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitor)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm05.Fusee.Serialization.SceneComponentContainer)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm07.System.Reflection.MethodBase)) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm07.System.Object)) ();
  };

  function $l$gc__DisplayClass1__ctor () {
  };

  function $l$gc__DisplayClass1_$lMakeComponentVisitor$gb__0 (visitor, component) {
    (this.info).Invoke(visitor, JSIL.Array.New($T03(), [component]));
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.VisitorCallerFactory+<>c__DisplayClass1", 
      IsPublic: false, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      $l$gc__DisplayClass1__ctor
    );

    $.Method({Static:false, Public:true }, "$lMakeComponentVisitor$gb__0", 
      new JSIL.MethodSignature(null, [$asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitor"), $asm05.TypeRef("Fusee.Serialization.SceneComponentContainer")]), 
      $l$gc__DisplayClass1_$lMakeComponentVisitor$gb__0
    );

    $.Field({Static:false, Public:true }, "info", $asm07.TypeRef("System.Reflection.MethodInfo")); 
    return function (newThisType) { $thisType = newThisType; }; 
  })
    .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

})();

/* class Fusee.Engine.SimpleScene.VisitorCallerFactory+<>c__DisplayClass4 */ 

(function $l$gc__DisplayClass4$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitor)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm05.Fusee.Serialization.SceneNodeContainer)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm07.System.Reflection.MethodBase)) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm07.System.Object)) ();
  };

  function $l$gc__DisplayClass4__ctor () {
  };

  function $l$gc__DisplayClass4_$lMakeNodeVistor$gb__3 (visitor, node) {
    (this.info).Invoke(visitor, JSIL.Array.New($T03(), [node]));
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.VisitorCallerFactory+<>c__DisplayClass4", 
      IsPublic: false, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      $l$gc__DisplayClass4__ctor
    );

    $.Method({Static:false, Public:true }, "$lMakeNodeVistor$gb__3", 
      new JSIL.MethodSignature(null, [$asm03.TypeRef("Fusee.Engine.SimpleScene.SceneVisitor"), $asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")]), 
      $l$gc__DisplayClass4_$lMakeNodeVistor$gb__3
    );

    $.Field({Static:false, Public:true }, "info", $asm07.TypeRef("System.Reflection.MethodInfo")); 
    return function (newThisType) { $thisType = newThisType; }; 
  })
    .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

})();

/* class Fusee.Engine.SimpleScene.ShaderCodeBuilder */ 

(function ShaderCodeBuilder$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm05.Fusee.Serialization.MaterialComponent)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm05.Fusee.Serialization.MeshComponent)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm07.System.Text.StringBuilder)) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm07.System.Object)) ();
  };
  var $T04 = function () {
    return ($T04 = JSIL.Memoize($asm07.System.Boolean)) ();
  };
  var $T05 = function () {
    return ($T05 = JSIL.Memoize($asm07.System.String)) ();
  };
  var $T06 = function () {
    return ($T06 = JSIL.Memoize(System.Array.Of($asm04.Fusee.Math.float3))) ();
  };
  var $T07 = function () {
    return ($T07 = JSIL.Memoize(System.Array.Of($asm04.Fusee.Math.float2))) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.Text.StringBuilder"), null))) ();
  };
  var $S01 = function () {
    return ($S01 = JSIL.Memoize(new JSIL.MethodSignature($asm07.TypeRef("System.Text.StringBuilder"), [$asm07.TypeRef("System.String")]))) ();
  };

  function ShaderCodeBuilder__ctor (mc, mesh) {
    JSIL.GetType(1);
    this._normalizeNormals = true;
    if (mesh !== null) {
      this.AnalyzeMesh(mesh);
    } else {
      this._hasVertices = this._hasNormals = this._hasUVs = true;
    }
    this.AnalyzeMaterial(mc);
    var stringBuilder = $S00().Construct();
    this.MeshInputDeclarations(stringBuilder);
    this.MatrixDeclarations(stringBuilder);
    this.VSBody(stringBuilder);
    this._vs = stringBuilder.toString();
    var stringBuilder2 = $S00().Construct();
    this.PixelInputDeclarations(stringBuilder2);
    this.PSBody(stringBuilder2);
    this._ps = stringBuilder2.toString();
  };

  function ShaderCodeBuilder_AddCameraVec (ps) {
    if (this._hasSpecular) {
      $S01().CallVirtual("Append", null, ps, "    vec3 Camera = vViewDir;\n");
    }
  };

  function ShaderCodeBuilder_AddChannelBaseColorCalculation (ps, hasChannelTexture, channelName) {
    if (!(hasChannelTexture && this._hasUVs)) {
      $S01().CallVirtual("Append", null, ps, "    vec3 ");
      $S01().CallVirtual("Append", null, ps, channelName);
      $S01().CallVirtual("Append", null, ps, "BaseColor = ");
      $S01().CallVirtual("Append", null, ps, channelName);
      $S01().CallVirtual("Append", null, ps, "Color;\n");
    } else {
      $S01().CallVirtual("Append", null, ps, "    vec3 ");
      $S01().CallVirtual("Append", null, ps, channelName);
      $S01().CallVirtual("Append", null, ps, "BaseColor = ");
      $S01().CallVirtual("Append", null, ps, channelName);
      $S01().CallVirtual("Append", null, ps, "Color * (1.0 - ");
      $S01().CallVirtual("Append", null, ps, channelName);
      $S01().CallVirtual("Append", null, ps, "Mix) + texture2D(");
      $S01().CallVirtual("Append", null, ps, channelName);
      $S01().CallVirtual("Append", null, ps, "Texture, vUV).rgb * ");
      $S01().CallVirtual("Append", null, ps, channelName);
      $S01().CallVirtual("Append", null, ps, "Mix;\n");
    }
  };

  function ShaderCodeBuilder_AddDiffuseChannel (ps) {
    if (this._hasDiffuse) {
      $S01().CallVirtual("Append", null, ps, "\n\n    //*********** DIFFUSE *********\n");
      this.AddChannelBaseColorCalculation(ps, this._hasDiffuseTexture, "Diffuse");
      $S01().CallVirtual("Append", null, ps, "    float diffFactor = dot(LDir, Normal);\n");
      $S01().CallVirtual("Append", null, ps, "    result += DiffuseBaseColor * LColor * LIntensity * max(diffFactor, 0.0);\n");
    }
  };

  function ShaderCodeBuilder_AddEmissiveChannel (ps) {
    if (this._hasEmissive) {
      $S01().CallVirtual("Append", null, ps, "\n\n    //*********** EMISSIVE *********\n");
      this.AddChannelBaseColorCalculation(ps, this._hasEmissiveTexture, "Emissive");
      $S01().CallVirtual("Append", null, ps, "    result += EmissiveBaseColor;\n");
    }
  };

  function ShaderCodeBuilder_AddLightVec (ps) {
    if (!(!this._hasDiffuse && !this._hasSpecular)) {
      $S01().CallVirtual("Append", null, ps, "    vec3 LDir = ");
      $S01().CallVirtual("Append", null, ps, $thisType.get_LightDirectionName());
      $S01().CallVirtual("Append", null, ps, ";\n");
      $S01().CallVirtual("Append", null, ps, "    vec3 LColor = ");
      $S01().CallVirtual("Append", null, ps, $thisType.get_LightColorName());
      $S01().CallVirtual("Append", null, ps, ";\n");
      $S01().CallVirtual("Append", null, ps, "    float LIntensity = ");
      $S01().CallVirtual("Append", null, ps, $thisType.get_LightIntensityName());
      $S01().CallVirtual("Append", null, ps, ";\n");
    }
  };

  function ShaderCodeBuilder_AddNormalVec (ps) {
    if (this._hasBump) {
      $S01().CallVirtual("Append", null, ps, "\n\n    //*********** BUMP *********\n");
      $S01().CallVirtual("Append", null, ps, "    vec3 bv =  normalize(texture2D(BumpTexture, vUV).xyz * 2.0 - 1.0);\n");
      $S01().CallVirtual("Append", null, ps, "    bv = vec3(bv.x, bv.y, -bv.z);\n");
      $S01().CallVirtual("Append", null, ps, "    vec3 Normal =  normalize(bv);\n\n");
    } else {
      $S01().CallVirtual("Append", null, ps, "    vec3 Normal = normalize(vNormal);\n");
    }
  };

  function ShaderCodeBuilder_AddSpecularChannel (ps) {
    if (this._hasSpecular) {
      $S01().CallVirtual("Append", null, ps, "\n\n    //*********** SPECULAR *********\n");
      if (!this._hasDiffuse) {
        $S01().CallVirtual("Append", null, ps, "    float diffFactor = dot(LDir, Normal);\n");
      }
      $S01().CallVirtual("Append", null, ps, "    if (diffFactor > 0.0) {\n  ");
      this.AddChannelBaseColorCalculation(ps, this._hasSpecularTexture, "Specular");
      $S01().CallVirtual("Append", null, ps, "      vec3 h = normalize(LDir + Camera);\n");
      $S01().CallVirtual("Append", null, ps, "      result += SpecularBaseColor * LColor * LIntensity * SpecularIntensity * pow(max(0.0, dot(h, Normal)), SpecularShininess);\n");
      $S01().CallVirtual("Append", null, ps, "    }\n");
    }
  };

  function ShaderCodeBuilder_AnalyzeMaterial (mc) {
    this._hasDiffuse = mc.get_HasDiffuse();
    if (this._hasDiffuse) {
      this._hasDiffuseTexture = mc.Diffuse.Texture !== null;
    }
    this._hasSpecular = mc.get_HasSpecular();
    if (this._hasSpecular) {
      this._hasSpecularTexture = mc.Specular.Texture !== null;
    }
    this._hasEmissive = mc.get_HasEmissive();
    if (this._hasEmissive) {
      this._hasEmissiveTexture = mc.Emissive.Texture !== null;
    }
    this._hasBump = mc.get_HasBump();
  };

  function ShaderCodeBuilder_AnalyzeMesh (mesh) {
    this._hasVertices = (mesh.Vertices !== null) && 
    ((mesh.Vertices.length | 0) > 0);
    this._hasNormals = (mesh.Normals !== null) && 
    ((mesh.Normals.length | 0) > 0);
    this._hasUVs = (mesh.UVs !== null) && 
    ((mesh.UVs.length | 0) > 0);
    this._hasColors = false;
  };

  function ShaderCodeBuilder_BumpInputDeclaration (ps) {
    if (this._hasBump) {
      $S01().CallVirtual("Append", null, ps, "  uniform sampler2D BumpTexture;\n");
      $S01().CallVirtual("Append", null, ps, "  uniform float BumpIntensity;\n\n");
    }
  };

  function ShaderCodeBuilder_ChannelInputDeclaration (ps, hasChannel, hasChannelTexture, channelName) {
    if (hasChannel) {
      $S01().CallVirtual("Append", null, ps, "  uniform vec3 ");
      $S01().CallVirtual("Append", null, ps, channelName);
      $S01().CallVirtual("Append", null, ps, "Color;\n");
      if (hasChannelTexture) {
        $S01().CallVirtual("Append", null, ps, "  uniform sampler2D ");
        $S01().CallVirtual("Append", null, ps, channelName);
        $S01().CallVirtual("Append", null, ps, "Texture;\n");
        $S01().CallVirtual("Append", null, ps, "  uniform float ");
        $S01().CallVirtual("Append", null, ps, channelName);
        $S01().CallVirtual("Append", null, ps, "Mix;\n\n");
      }
    }
  };

  function ShaderCodeBuilder_get_BumpIntensityName () {
    return (
      this._hasBump
         ? "BumpIntensity"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_BumpTextureName () {
    return (
      this._hasBump
         ? "BumpTexture"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_DiffuseColorName () {
    return (
      this._hasDiffuse
         ? "DiffuseColor"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_DiffuseMixName () {
    return (
      this._hasDiffuse
         ? "DiffuseMix"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_DiffuseTextureName () {
    return (
      this._hasDiffuseTexture
         ? "DiffuseTexture"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_EmissiveColorName () {
    return (
      this._hasEmissive
         ? "EmissiveColor"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_EmissiveMixName () {
    return (
      this._hasEmissive
         ? "EmissiveMix"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_EmissiveTextureName () {
    return (
      this._hasEmissiveTexture
         ? "EmissiveTexture"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_LightColorName () {
    return "LightColor";
  };

  function ShaderCodeBuilder_get_LightDirectionName () {
    return "LightDirection";
  };

  function ShaderCodeBuilder_get_LightIntensityName () {
    return "LightIntensity";
  };

  function ShaderCodeBuilder_get_PS () {
    return this._ps;
  };

  function ShaderCodeBuilder_get_SpecularColorName () {
    return (
      this._hasSpecular
         ? "SpecularColor"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_SpecularIntensityName () {
    return (
      this._hasSpecular
         ? "SpecularIntensity"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_SpecularMixName () {
    return (
      this._hasSpecular
         ? "SpecularMix"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_SpecularShininessName () {
    return (
      this._hasSpecular
         ? "SpecularShininess"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_SpecularTextureName () {
    return (
      this._hasSpecularTexture
         ? "SpecularTexture"
         : null)
    ;
  };

  function ShaderCodeBuilder_get_VS () {
    return this._vs;
  };

  function ShaderCodeBuilder_MatrixDeclarations (vs) {
    if (this._hasSpecular) {
      $S01().CallVirtual("Append", null, vs, "  uniform mat4 FUSEE_IMV;\n");
    }
    $S01().CallVirtual("Append", null, vs, "  uniform mat4 FUSEE_MVP;\n");
  };

  function ShaderCodeBuilder_MeshInputDeclarations (vs) {
    if (this._hasVertices) {
      $S01().CallVirtual("Append", null, vs, "  attribute vec3 fuVertex;\n");
      if (this._hasSpecular) {
        $S01().CallVirtual("Append", null, vs, "  varying vec3 vViewDir;\n");
      }
    }
    if (this._hasNormals) {
      $S01().CallVirtual("Append", null, vs, "  attribute vec3 fuNormal;\n  varying vec3 vNormal;\n");
    }
    if (this._hasUVs) {
      $S01().CallVirtual("Append", null, vs, "  attribute vec2 fuUV;\n  varying vec2 vUV;\n");
    }
    if (this._hasColors) {
      $S01().CallVirtual("Append", null, vs, "  attribute vec4 fuColor;\n  varying vec4 vColors;\n");
    }
  };

  function ShaderCodeBuilder_PixelInputDeclarations (ps) {
    $S01().CallVirtual("Append", null, ps, "#ifdef GL_ES\n");
    $S01().CallVirtual("Append", null, ps, "  precision highp float;\n");
    $S01().CallVirtual("Append", null, ps, "#endif\n\n");
    this.ChannelInputDeclaration(ps, this._hasDiffuse, this._hasDiffuseTexture, "Diffuse");
    this.SpecularInputDeclaration(ps);
    this.ChannelInputDeclaration(ps, this._hasEmissive, this._hasEmissiveTexture, "Emissive");
    this.BumpInputDeclaration(ps);
    if (!(!this._hasSpecular && !this._hasDiffuse)) {
      $S01().CallVirtual("Append", null, ps, "  uniform vec3 ");
      $S01().CallVirtual("Append", null, ps, $thisType.get_LightColorName());
      $S01().CallVirtual("Append", null, ps, ";\n");
      $S01().CallVirtual("Append", null, ps, "  uniform float ");
      $S01().CallVirtual("Append", null, ps, $thisType.get_LightIntensityName());
      $S01().CallVirtual("Append", null, ps, ";\n");
      $S01().CallVirtual("Append", null, ps, "  uniform vec3 ");
      $S01().CallVirtual("Append", null, ps, $thisType.get_LightDirectionName());
      $S01().CallVirtual("Append", null, ps, ";\n");
    }
    if (this._hasSpecular) {
      $S01().CallVirtual("Append", null, ps, "  varying vec3 vViewDir;\n");
    }
    if (this._hasNormals) {
      $S01().CallVirtual("Append", null, ps, "  varying vec3 vNormal;\n");
    }
    if (this._hasUVs) {
      $S01().CallVirtual("Append", null, ps, "  varying vec2 vUV;\n");
    }
  };

  function ShaderCodeBuilder_PSBody (ps) {
    $S01().CallVirtual("Append", null, ps, "\n\n  void main()\n  {\n");
    $S01().CallVirtual("Append", null, ps, "    vec3 result = vec3(0, 0, 0);\n\n");
    this.AddNormalVec(ps);
    this.AddCameraVec(ps);
    this.AddLightVec(ps);
    this.AddEmissiveChannel(ps);
    this.AddDiffuseChannel(ps);
    this.AddSpecularChannel(ps);
    $S01().CallVirtual("Append", null, ps, "\n    gl_FragColor = vec4(result, 1.0);\n");
    $S01().CallVirtual("Append", null, ps, "  }\n\n");
  };

  function ShaderCodeBuilder_SpecularInputDeclaration (ps) {
    if (this._hasSpecular) {
      this.ChannelInputDeclaration(ps, this._hasSpecular, this._hasSpecularTexture, "Specular");
      $S01().CallVirtual("Append", null, ps, "  uniform float SpecularShininess;\n");
      $S01().CallVirtual("Append", null, ps, "  uniform float SpecularIntensity;\n\n");
    }
  };

  function ShaderCodeBuilder_VSBody (vs) {
    $S01().CallVirtual("Append", null, vs, "\n\n  void main()\n  {\n");
    if (this._hasNormals) {
      if (this._normalizeNormals) {
        $S01().CallVirtual("Append", null, vs, "    vNormal = normalize(fuNormal);\n");
      } else {
        $S01().CallVirtual("Append", null, vs, "    vNormal = fuNormal;\n");
      }
    }
    if (this._hasSpecular) {
      $S01().CallVirtual("Append", null, vs, "    vec3 viewPos = FUSEE_IMV[3].xyz;\n");
      $S01().CallVirtual("Append", null, vs, "    vViewDir = normalize(viewPos - fuVertex);\n");
    }
    $S01().CallVirtual("Append", null, vs, "    gl_Position = FUSEE_MVP * vec4(fuVertex, 1.0);\n");
    if (this._hasUVs) {
      $S01().CallVirtual("Append", null, vs, "    vUV = fuUV;\n");
    }
    $S01().CallVirtual("Append", null, vs, "  }\n\n");
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.ShaderCodeBuilder", 
      IsPublic: false, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 2, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      new JSIL.MethodSignature(null, [$asm05.TypeRef("Fusee.Serialization.MaterialComponent"), $asm05.TypeRef("Fusee.Serialization.MeshComponent")]), 
      ShaderCodeBuilder__ctor
    );

    $.Method({Static:false, Public:false}, "AddCameraVec", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_AddCameraVec
    );

    $.Method({Static:false, Public:false}, "AddChannelBaseColorCalculation", 
      new JSIL.MethodSignature(null, [
          $asm07.TypeRef("System.Text.StringBuilder"), $.Boolean, 
          $.String
        ]), 
      ShaderCodeBuilder_AddChannelBaseColorCalculation
    );

    $.Method({Static:false, Public:false}, "AddDiffuseChannel", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_AddDiffuseChannel
    );

    $.Method({Static:false, Public:false}, "AddEmissiveChannel", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_AddEmissiveChannel
    );

    $.Method({Static:false, Public:false}, "AddLightVec", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_AddLightVec
    );

    $.Method({Static:false, Public:false}, "AddNormalVec", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_AddNormalVec
    );

    $.Method({Static:false, Public:false}, "AddSpecularChannel", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_AddSpecularChannel
    );

    $.Method({Static:false, Public:false}, "AnalyzeMaterial", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.MaterialComponent")), 
      ShaderCodeBuilder_AnalyzeMaterial
    );

    $.Method({Static:false, Public:false}, "AnalyzeMesh", 
      JSIL.MethodSignature.Action($asm05.TypeRef("Fusee.Serialization.MeshComponent")), 
      ShaderCodeBuilder_AnalyzeMesh
    );

    $.Method({Static:false, Public:false}, "BumpInputDeclaration", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_BumpInputDeclaration
    );

    $.Method({Static:false, Public:false}, "ChannelInputDeclaration", 
      new JSIL.MethodSignature(null, [
          $asm07.TypeRef("System.Text.StringBuilder"), $.Boolean, 
          $.Boolean, $.String
        ]), 
      ShaderCodeBuilder_ChannelInputDeclaration
    );

    $.Method({Static:false, Public:true }, "get_BumpIntensityName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_BumpIntensityName
    );

    $.Method({Static:false, Public:true }, "get_BumpTextureName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_BumpTextureName
    );

    $.Method({Static:false, Public:true }, "get_DiffuseColorName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_DiffuseColorName
    );

    $.Method({Static:false, Public:true }, "get_DiffuseMixName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_DiffuseMixName
    );

    $.Method({Static:false, Public:true }, "get_DiffuseTextureName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_DiffuseTextureName
    );

    $.Method({Static:false, Public:true }, "get_EmissiveColorName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_EmissiveColorName
    );

    $.Method({Static:false, Public:true }, "get_EmissiveMixName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_EmissiveMixName
    );

    $.Method({Static:false, Public:true }, "get_EmissiveTextureName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_EmissiveTextureName
    );

    $.Method({Static:true , Public:true }, "get_LightColorName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_LightColorName
    );

    $.Method({Static:true , Public:true }, "get_LightDirectionName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_LightDirectionName
    );

    $.Method({Static:true , Public:true }, "get_LightIntensityName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_LightIntensityName
    );

    $.Method({Static:false, Public:true }, "get_PS", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_PS
    );

    $.Method({Static:false, Public:true }, "get_SpecularColorName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_SpecularColorName
    );

    $.Method({Static:false, Public:true }, "get_SpecularIntensityName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_SpecularIntensityName
    );

    $.Method({Static:false, Public:true }, "get_SpecularMixName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_SpecularMixName
    );

    $.Method({Static:false, Public:true }, "get_SpecularShininessName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_SpecularShininessName
    );

    $.Method({Static:false, Public:true }, "get_SpecularTextureName", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_SpecularTextureName
    );

    $.Method({Static:false, Public:true }, "get_VS", 
      JSIL.MethodSignature.Return($.String), 
      ShaderCodeBuilder_get_VS
    );

    $.Method({Static:false, Public:false}, "MatrixDeclarations", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_MatrixDeclarations
    );

    $.Method({Static:false, Public:false}, "MeshInputDeclarations", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_MeshInputDeclarations
    );

    $.Method({Static:false, Public:false}, "PixelInputDeclarations", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_PixelInputDeclarations
    );

    $.Method({Static:false, Public:false}, "PSBody", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_PSBody
    );

    $.Method({Static:false, Public:false}, "SpecularInputDeclaration", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_SpecularInputDeclaration
    );

    $.Method({Static:false, Public:false}, "VSBody", 
      JSIL.MethodSignature.Action($asm07.TypeRef("System.Text.StringBuilder")), 
      ShaderCodeBuilder_VSBody
    );

    $.Field({Static:false, Public:false}, "_hasVertices", $.Boolean); 
    $.Field({Static:false, Public:false}, "_hasNormals", $.Boolean); 
    $.Field({Static:false, Public:false}, "_hasUVs", $.Boolean); 
    $.Field({Static:false, Public:false}, "_hasColors", $.Boolean); 
    $.Field({Static:false, Public:false}, "_hasDiffuse", $.Boolean); 
    $.Field({Static:false, Public:false}, "_hasSpecular", $.Boolean); 
    $.Field({Static:false, Public:false}, "_hasEmissive", $.Boolean); 
    $.Field({Static:false, Public:false}, "_hasBump", $.Boolean); 
    $.Field({Static:false, Public:false}, "_hasDiffuseTexture", $.Boolean); 
    $.Field({Static:false, Public:false}, "_hasSpecularTexture", $.Boolean); 
    $.Field({Static:false, Public:false}, "_hasEmissiveTexture", $.Boolean); 
    $.Field({Static:false, Public:false}, "_normalizeNormals", $.Boolean); 
    $.Field({Static:false, Public:false}, "_vs", $.String); 
    $.Field({Static:false, Public:false}, "_ps", $.String); 
    $.Property({Static:false, Public:true }, "VS", $.String);

    $.Property({Static:false, Public:true }, "PS", $.String);

    $.Property({Static:false, Public:true }, "DiffuseColorName", $.String);

    $.Property({Static:false, Public:true }, "SpecularColorName", $.String);

    $.Property({Static:false, Public:true }, "EmissiveColorName", $.String);

    $.Property({Static:false, Public:true }, "DiffuseTextureName", $.String);

    $.Property({Static:false, Public:true }, "SpecularTextureName", $.String);

    $.Property({Static:false, Public:true }, "EmissiveTextureName", $.String);

    $.Property({Static:false, Public:true }, "BumpTextureName", $.String);

    $.Property({Static:false, Public:true }, "DiffuseMixName", $.String);

    $.Property({Static:false, Public:true }, "SpecularMixName", $.String);

    $.Property({Static:false, Public:true }, "EmissiveMixName", $.String);

    $.Property({Static:false, Public:true }, "SpecularShininessName", $.String);

    $.Property({Static:false, Public:true }, "SpecularIntensityName", $.String);

    $.Property({Static:false, Public:true }, "BumpIntensityName", $.String);

    $.Property({Static:true , Public:true }, "LightDirectionName", $.String);

    $.Property({Static:true , Public:true }, "LightColorName", $.String);

    $.Property({Static:true , Public:true }, "LightIntensityName", $.String);

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.ViseratorExtensions */ 

(function ViseratorExtensions$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Type)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm05.Fusee.Serialization.SceneNodeContainer)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.SceneVisitorHelpers)) ();
  };
  var $T03 = function () {
    return ($T03 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerable$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer))) ();
  };
  var $IM00 = function () {
    return ($IM00 = JSIL.Memoize($asm07.System.Collections.Generic.IEnumerable$b1.Of($asm05.Fusee.Serialization.SceneNodeContainer).GetEnumerator)) ();
  };

  function ViseratorExtensions_Viserate$b2$00 (TViserator, TResult, root) {
    var viseratorEnumerable = new ($asm03.Fusee.Engine.SimpleScene.ViseratorExtensions_ViseratorEnumerable$b2.Of(TViserator, TResult)) ();
    viseratorEnumerable._rootList = $T02().SingleRootEnum(root);
    return viseratorEnumerable;
  };

  function ViseratorExtensions_Viserate$b2$01 (TViserator, TResult, rootList) {
    var viseratorEnumerable = new ($asm03.Fusee.Engine.SimpleScene.ViseratorExtensions_ViseratorEnumerable$b2.Of(TViserator, TResult)) ();
    viseratorEnumerable._rootList = $IM00().Call(rootList, null);
    return viseratorEnumerable;
  };

  JSIL.MakeStaticClass("Fusee.Engine.SimpleScene.ViseratorExtensions", true, [], function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:true , Public:true }, "Viserate", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", ["!!1"]), [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")], ["TViserator", "TResult"]), 
      ViseratorExtensions_Viserate$b2$00
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    $.Method({Static:true , Public:true }, "Viserate", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerable`1", ["!!1"]), [$asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])], ["TViserator", "TResult"]), 
      ViseratorExtensions_Viserate$b2$01
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

    return function (newThisType) { $thisType = newThisType; }; 
  })
    .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.ExtensionAttribute"));

})();

/* class Fusee.Engine.SimpleScene.ViseratorExtensions+ViseratorEnumerable`2 */ 

(function ViseratorEnumerable$b2$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Activator)) ();
  };

  function ViseratorEnumerable$b2__ctor () {
  };

  function ViseratorEnumerable$b2_GetEnumerator () {
    var tViserator = JSIL.CloneParameter($thisType.TViserator.get(this), $T00().CreateInstance$b1($thisType.TViserator.get(this))());
    (tViserator).Init(this._rootList);
    return $asm07.System.Collections.Generic.IEnumerator$b1.Of($thisType.TResult.get(this)).$Cast(tViserator);
  };

  function ViseratorEnumerable$b2_System_Collections_IEnumerable_GetEnumerator () {
    return this.GetEnumerator();
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.ViseratorExtensions+ViseratorEnumerable`2", 
      IsPublic: false, 
      IsReferenceType: true, 
      GenericParameters: ["TViserator", "TResult"], 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      ViseratorEnumerable$b2__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "GetEnumerator", 
      new JSIL.MethodSignature($asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$.GenericParameter("TResult")]), null), 
      ViseratorEnumerable$b2_GetEnumerator
    );

    $.Method({Static:false, Public:false, Virtual:true }, "System.Collections.IEnumerable.GetEnumerator", 
      JSIL.MethodSignature.Return($asm07.TypeRef("System.Collections.IEnumerator")), 
      ViseratorEnumerable$b2_System_Collections_IEnumerable_GetEnumerator
    )
      .Overrides($asm07.TypeRef("System.Collections.IEnumerable"), "GetEnumerator");

    $.Field({Static:false, Public:false}, "_rootList", $asm07.TypeRef("System.Collections.Generic.IEnumerator`1", [$asm05.TypeRef("Fusee.Serialization.SceneNodeContainer")])); 
    $.ImplementInterfaces(
      /* 0 */ $asm07.TypeRef("System.Collections.Generic.IEnumerable`1", [$.GenericParameter("TResult")]), 
      /* 1 */ $asm07.TypeRef("System.Collections.IEnumerable")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.StateStack`1 */ 

(function StateStack$b1$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Int32)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm07.System.Array)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.MethodSignature(null, [
        $asm07.TypeRef("System.Array"), $asm07.TypeRef("System.Int32"), 
        $asm07.TypeRef("System.Array"), $asm07.TypeRef("System.Int32"), 
        $asm07.TypeRef("System.Int32")
      ]))) ();
  };

  function StateStack$b1__ctor (capacity) {
    this._array = JSIL.Array.New($thisType.T.get(this), capacity);
    this._top = 0;
  };

  function StateStack$b1_Clear () {
    JSIL.Array.Erase(this._array, $thisType.T.get(this), 0, (((this._top | 0) + 1) | 0));
    this._top = 0;
  };

  function StateStack$b1_get_Depth () {
    return (((this._top | 0) + 1) | 0);
  };

  function StateStack$b1_get_Tos () {
    return this._array[this._top];
  };

  function StateStack$b1_Pop () {
    var $temp00;
    this._array[($temp00 = (this._top | 0), 
      this._top = (((this._top | 0) - 1) | 0), 
      $temp00)] = (
      $thisType.T.get(this).IsValueType
         ? JSIL.CreateInstanceOfType($thisType.T.get(this))
         : null)
    ;
  };

  function StateStack$b1_Push () {
    var num = (((this._top | 0) + 1) | 0);
    if (num === (this._array.length | 0)) {
      var array = JSIL.Array.New($thisType.T.get(this), Math.imul(2, this._array.length));
      $S00().CallStatic($T01(), "Copy", null, 
        this._array, 
        0, 
        array, 
        0, 
        num
      );
      this._array = array;
    }
    this._array[num] = JSIL.CloneParameter($thisType.T.get(this), this._array[this._top]);
    this._top = (((this._top | 0) + 1) | 0);
  };

  function StateStack$b1_set_Tos (value) {
    this._array[this._top] = JSIL.CloneParameter($thisType.T.get(this), value);
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.StateStack`1", 
      IsPublic: true, 
      IsReferenceType: true, 
      GenericParameters: ["T"], 
      MaximumConstructorArguments: 1, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Action($.Int32), 
      StateStack$b1__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Clear", 
      JSIL.MethodSignature.Void, 
      StateStack$b1_Clear
    );

    $.Method({Static:false, Public:true , Virtual:true }, "get_Depth", 
      JSIL.MethodSignature.Return($.Int32), 
      StateStack$b1_get_Depth
    );

    $.Method({Static:false, Public:true }, "get_Tos", 
      new JSIL.MethodSignature($.GenericParameter("T"), null), 
      StateStack$b1_get_Tos
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Pop", 
      JSIL.MethodSignature.Void, 
      StateStack$b1_Pop
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Push", 
      JSIL.MethodSignature.Void, 
      StateStack$b1_Push
    );

    $.Method({Static:false, Public:true }, "set_Tos", 
      new JSIL.MethodSignature(null, [$.GenericParameter("T")]), 
      StateStack$b1_set_Tos
    );

    $.Constant({Static:true , Public:false}, "_defaultCapacity", 8); 
    $.Field({Static:false, Public:false}, "_array", $jsilcore.TypeRef("System.Array", [$.GenericParameter("T")])); 
    $.Field({Static:false, Public:false}, "_top", $.Int32); 
    $.Property({Static:false, Public:true }, "Tos", $.GenericParameter("T"));

    $.Property({Static:false, Public:true , Virtual:true }, "Depth", $.Int32);

    $.ImplementInterfaces(
      /* 0 */ $asm03.TypeRef("Fusee.Engine.SimpleScene.IStateStack")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.CollapsingStateStack`1 */ 

(function CollapsingStateStack$b1$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm07.System.Int32)) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.StateStack$b1.Of($asm07.System.Int32))) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm07.System.InvalidOperationException)) ();
  };
  var $S00 = function () {
    return ($S00 = JSIL.Memoize(new JSIL.ConstructorSignature($asm07.TypeRef("System.InvalidOperationException"), [$asm07.TypeRef("System.String")]))) ();
  };

  function CollapsingStateStack$b1__ctor (capacity) {
    this._impStack = new ($asm03.Fusee.Engine.SimpleScene.StateStack$b1.Of($thisType.T.get(this))) (capacity);
    this._countStack = new ($T01())(capacity);
  };

  function CollapsingStateStack$b1_Clear () {
    (this._impStack).Clear();
    (this._countStack).Clear();
    $thisType.Of($thisType.T.get(this)).prototype.set_Depth.call(this, 0);
  };

  function CollapsingStateStack$b1_get_Depth () {
    return this.CollapsingStateStack$b1$Depth$value;
  };

  function CollapsingStateStack$b1_get_Tos () {
    return (this._impStack).get_Tos();
  };

  function CollapsingStateStack$b1_Pop () {
    var $temp00;
    if ((this.get_Depth() | 0) <= 0) {
      throw $S00().Construct("CollapsingState Stack depth is already 0. Cannot Pop stack.");
    }
    this.Depth = (((this.Depth | 0) - 1) | 0);
    if (((this._countStack).get_Tos() | 0) > 1) {
      ($temp00 = ((((this._countStack).get_Tos() | 0) - 1) | 0), 
        (this._countStack).set_Tos($temp00), 
        $temp00);
    } else {
      (this._countStack).Pop();
      (this._impStack).Pop();
    }
  };

  function CollapsingStateStack$b1_Push () {
    var $temp00;
    this.Depth = (((this.Depth | 0) + 1) | 0);
    ($temp00 = ((((this._countStack).get_Tos() | 0) + 1) | 0), 
      (this._countStack).set_Tos($temp00), 
      $temp00);
  };

  function CollapsingStateStack$b1_set_Depth (value) {
    this.CollapsingStateStack$b1$Depth$value = (value | 0);
  };

  function CollapsingStateStack$b1_set_Tos (value) {
    var $temp00;
    if (((this._countStack).get_Tos() | 0) > 0) {
      ($temp00 = ((((this._countStack).get_Tos() | 0) - 1) | 0), 
        (this._countStack).set_Tos($temp00), 
        $temp00);
      (this._impStack).Push();
      (this._countStack).Push();
      (this._countStack).set_Tos(0);
    }
    (this._impStack).set_Tos(JSIL.CloneParameter($thisType.T.get(this), value));
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.CollapsingStateStack`1", 
      IsPublic: true, 
      IsReferenceType: true, 
      GenericParameters: ["T"], 
      MaximumConstructorArguments: 1, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Action($.Int32), 
      CollapsingStateStack$b1__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Clear", 
      JSIL.MethodSignature.Void, 
      CollapsingStateStack$b1_Clear
    );

    $.Method({Static:false, Public:true , Virtual:true }, "get_Depth", 
      JSIL.MethodSignature.Return($.Int32), 
      CollapsingStateStack$b1_get_Depth
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

    $.Method({Static:false, Public:true }, "get_Tos", 
      new JSIL.MethodSignature($.GenericParameter("T"), null), 
      CollapsingStateStack$b1_get_Tos
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Pop", 
      JSIL.MethodSignature.Void, 
      CollapsingStateStack$b1_Pop
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Push", 
      JSIL.MethodSignature.Void, 
      CollapsingStateStack$b1_Push
    );

    $.Method({Static:false, Public:false}, "set_Depth", 
      JSIL.MethodSignature.Action($.Int32), 
      CollapsingStateStack$b1_set_Depth
    )
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute"));

    $.Method({Static:false, Public:true }, "set_Tos", 
      new JSIL.MethodSignature(null, [$.GenericParameter("T")]), 
      CollapsingStateStack$b1_set_Tos
    );

    $.Constant({Static:true , Public:false}, "_defaultCapacity", 4); 
    $.Field({Static:false, Public:false, ReadOnly:true }, "_impStack", $asm03.TypeRef("Fusee.Engine.SimpleScene.StateStack`1", [$.GenericParameter("T")])); 
    $.Field({Static:false, Public:false, ReadOnly:true }, "_countStack", $asm03.TypeRef("Fusee.Engine.SimpleScene.StateStack`1", [$.Int32])); 
    $.Field({Static:false, Public:false}, "CollapsingStateStack$b1$Depth$value", $.Int32)
      .Attribute($asm07.TypeRef("System.Runtime.CompilerServices.CompilerGeneratedAttribute")); 
    $.Property({Static:false, Public:true , Virtual:true }, "Depth", $.Int32);

    $.Property({Static:false, Public:true }, "Tos", $.GenericParameter("T"));

    $.ImplementInterfaces(
      /* 0 */ $asm03.TypeRef("Fusee.Engine.SimpleScene.IStateStack")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.EmptyState */ 

(function EmptyState$Members () {
  var $, $thisType;
  function EmptyState__ctor () {
  };

  function EmptyState_Clear () {
    this._depth = 0;
  };

  function EmptyState_get_Depth () {
    return this._depth;
  };

  function EmptyState_Pop () {
    this._depth = (((this._depth | 0) - 1) | 0);
  };

  function EmptyState_Push () {
    this._depth = (((this._depth | 0) + 1) | 0);
  };

  JSIL.MakeType({
      BaseType: $asm07.TypeRef("System.Object"), 
      Name: "Fusee.Engine.SimpleScene.EmptyState", 
      IsPublic: true, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      EmptyState__ctor
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Clear", 
      JSIL.MethodSignature.Void, 
      EmptyState_Clear
    );

    $.Method({Static:false, Public:true , Virtual:true }, "get_Depth", 
      JSIL.MethodSignature.Return($.Int32), 
      EmptyState_get_Depth
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Pop", 
      JSIL.MethodSignature.Void, 
      EmptyState_Pop
    );

    $.Method({Static:false, Public:true , Virtual:true }, "Push", 
      JSIL.MethodSignature.Void, 
      EmptyState_Push
    );

    $.Field({Static:false, Public:false}, "_depth", $.Int32); 
    $.Property({Static:false, Public:true , Virtual:true }, "Depth", $.Int32);

    $.ImplementInterfaces(
      /* 0 */ $asm03.TypeRef("Fusee.Engine.SimpleScene.IStateStack")
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

/* class Fusee.Engine.SimpleScene.StandardState */ 

(function StandardState$Members () {
  var $, $thisType;
  var $T00 = function () {
    return ($T00 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.CollapsingStateStack$b1.Of($asm04.Fusee.Math.float4x4))) ();
  };
  var $T01 = function () {
    return ($T01 = JSIL.Memoize($asm03.Fusee.Engine.SimpleScene.VisitorState)) ();
  };
  var $T02 = function () {
    return ($T02 = JSIL.Memoize($asm04.Fusee.Math.float4x4)) ();
  };

  function StandardState__ctor () {
    this._model = new ($T00())(4);
    this._view = new ($T00())(4);
    this._projection = new ($T00())(4);
    $T01().prototype._ctor.call(this);
    this.RegisterState(this._model);
    this.RegisterState(this._view);
    this.RegisterState(this._projection);
  };

  function StandardState_get_Model () {
    return (this._model).get_Tos();
  };

  function StandardState_get_Projection () {
    return (this._projection).get_Tos();
  };

  function StandardState_get_View () {
    return (this._view).get_Tos();
  };

  function StandardState_set_Model (value) {
    (this._model).set_Tos(value.MemberwiseClone());
  };

  function StandardState_set_Projection (value) {
    (this._projection).set_Tos(value.MemberwiseClone());
  };

  function StandardState_set_View (value) {
    (this._view).set_Tos(value.MemberwiseClone());
  };

  JSIL.MakeType({
      BaseType: $asm03.TypeRef("Fusee.Engine.SimpleScene.VisitorState"), 
      Name: "Fusee.Engine.SimpleScene.StandardState", 
      IsPublic: true, 
      IsReferenceType: true, 
      MaximumConstructorArguments: 0, 
    }, function ($interfaceBuilder) {
    $ = $interfaceBuilder;

    $.Method({Static:false, Public:true }, ".ctor", 
      JSIL.MethodSignature.Void, 
      StandardState__ctor
    );

    $.Method({Static:false, Public:true }, "get_Model", 
      JSIL.MethodSignature.Return($asm04.TypeRef("Fusee.Math.float4x4")), 
      StandardState_get_Model
    );

    $.Method({Static:false, Public:true }, "get_Projection", 
      JSIL.MethodSignature.Return($asm04.TypeRef("Fusee.Math.float4x4")), 
      StandardState_get_Projection
    );

    $.Method({Static:false, Public:true }, "get_View", 
      JSIL.MethodSignature.Return($asm04.TypeRef("Fusee.Math.float4x4")), 
      StandardState_get_View
    );

    $.Method({Static:false, Public:true }, "set_Model", 
      JSIL.MethodSignature.Action($asm04.TypeRef("Fusee.Math.float4x4")), 
      StandardState_set_Model
    );

    $.Method({Static:false, Public:true }, "set_Projection", 
      JSIL.MethodSignature.Action($asm04.TypeRef("Fusee.Math.float4x4")), 
      StandardState_set_Projection
    );

    $.Method({Static:false, Public:true }, "set_View", 
      JSIL.MethodSignature.Action($asm04.TypeRef("Fusee.Math.float4x4")), 
      StandardState_set_View
    );

    $.Field({Static:false, Public:false}, "_model", $asm03.TypeRef("Fusee.Engine.SimpleScene.CollapsingStateStack`1", [$asm04.TypeRef("Fusee.Math.float4x4")])); 
    $.Field({Static:false, Public:false}, "_view", $asm03.TypeRef("Fusee.Engine.SimpleScene.CollapsingStateStack`1", [$asm04.TypeRef("Fusee.Math.float4x4")])); 
    $.Field({Static:false, Public:false}, "_projection", $asm03.TypeRef("Fusee.Engine.SimpleScene.CollapsingStateStack`1", [$asm04.TypeRef("Fusee.Math.float4x4")])); 
    $.Property({Static:false, Public:true }, "Model", $asm04.TypeRef("Fusee.Math.float4x4"));

    $.Property({Static:false, Public:true }, "View", $asm04.TypeRef("Fusee.Math.float4x4"));

    $.Property({Static:false, Public:true }, "Projection", $asm04.TypeRef("Fusee.Math.float4x4"));

    $.ImplementInterfaces(
    );

    return function (newThisType) { $thisType = newThisType; }; 
  });

})();

